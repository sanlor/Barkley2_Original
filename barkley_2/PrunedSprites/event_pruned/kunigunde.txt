// Kunigunde
// event_dz1_kunigunde01
// o_kunigunde01
// Lady at center of Wasteland Dwarf Zone. Involved in Dead Dwarf Figbottom quest.
/*
if (argument0 == SCRIPT_START)
{
    scr_entity_animation_set(o_kunigunde01, "default");
}
else if (argument0 == SCRIPT_STEP)
{
    // If arrested, will not be visible anymore.
    if (visible && !scr_event_etc_instance_on_screen(id) && scr_quest_get_state("kunigundeArrest") == 1)
    {
        scr_event_interactive_deactivate();
    }
}
else if (argument0 == SCRIPT_INTERACT)
{
    var kunigunde = id;
    var event = scr_event_create_main();
    
    var first_question_snippet = scr_event_create_child(event);
    
    //--------------------------------------------
    //--------- FIRST QUESTION SNIPPET -----------
    //-------------------------------------------- 
    with (first_question_snippet)
    {
        scr_event_build_dialogue("Kunigunde", "s_port_kunigunde", "Oh heavens, I meant about myself. I'm sure you've got questions abound regarding the Industrial Park's premiere socialite. Where my impeccable social graces or understated but immaculately articulated elegance comes from? Grooming inquiries? Fashion, perfumes? Well, okay, okay, I suppose I can give you the time. I suppose I was born with this beauty, but I certainly had to work to-");
        scr_event_build_dialogue(P_NAME, s_port_hoopz, "Actually, I kind of wanted to know about-");
        scr_event_build_dialogue("Kunigunde", "s_port_kunigunde", "The burden of being a social icon at the forefront of the fashion world? Of course, of course, it's what everyone wants to know. Honestly, sometimes the burden is too much, but then I remind myself that I do this all for you...");
        scr_event_build_fade(true, 2);
        scr_event_build_wait_for_actions();
        // scr_event_build_wait(2);
        scr_event_build_fade(false, 2);
        scr_event_build_wait_for_actions();
        scr_event_build_dialogue("Kunigunde", "s_port_kunigunde", "...and -that- is why you -never- R.S.V.P. to Duergar events. So uncouth! Oh, but was there anything else you wanted to know?");
        scr_event_build_dialogue(P_NAME, s_port_hoopz, "...sigh... well...");
        scr_event_build_quest_state("kunigundeState", 1);
        scr_event_build_execute_event_script(event_dz1_kunigunde01);
    }
    
    //--------------------------------------------
    //--------------- MAIN EVENT -----------------
    //-------------------------------------------- 
    with (event)
    {
        // ********** ON CHUP SALE **********               
        if (scr_quest_get_state("kunigundeChupHandler") == 1)
        {
            scr_event_build_quest_state("kunigundeChupHandler", 0);
            // Arrest if Suspicion == 3
            if (scr_quest_get_state("chupSuspicion") == 3)
            {
                scr_event_build_execute_event_script(event_dz1_chupArrest01); 
            }
        }
        
        // ********** INTRO TEXT! **********
        
        // Figbottom Quest Complete
        else if (scr_quest_get_state("figbottomQuest") == 9)
        {
            scr_event_build_dialogue("Kunigunde", "s_port_kunigunde", "Oh, I'm certainly glad the matter of Figbottom has been cleared up. Can you imagine the scandal if I had been unjustly thrown in the Marshal's jail? You'd never hear the end of it from my supporters. Oh, but I don't have all day to answer your questions, but I suppose I can answer a few.");
        }
        // Talked more than once.
        else if (scr_quest_get_state("kunigundeState") == 2)
        {
            scr_event_build_dialogue("Kunigunde", "s_port_kunigunde", "Oh, it's you again! I hope you understand how busy I am and how much it inconveniences me to answer your questions all day long. It's not as if you're the only person in the Industrial Park who wants to interview me! Oh, but I suppose I could spare a moment. Go ahead, ask away...");
        }
        // Talked first time, back from loop after long-talking snippet.
        else if (scr_quest_get_state("kunigundeState") == 1)
        {
            // After the interuption, the script will run again, and we don't want any intro text to play.
            scr_event_build_quest_state("kunigundeState", 2);
        }
        // Talked first time.
        else
        {
            scr_event_build_dialogue("Kunigunde", "s_port_kunigunde", "Hm? Are you new here? I'm -certain- I've never seen you around before. Ah, yes, my manners. Welcome to the Industrial Park. I'm Kunigunde, the -official- town greeter. My fellows in the Industrial Park have -chosen- me for the privilege of being town greeter, no doubt because of my extensive knowledge of the local goings-on and alluring, amiable demeanor (which I'm sure you've noticed by now). Oh, but I'm sure you have questions. Go ahead and ask them, I'm all ears.");    
        }
        
        // *********** QUESTIONS ***********
        var kunigunde_question = scr_event_build_choice("Ask...", s_port_hoopz);
            
        // Where am I?
        with scr_event_build_add_choice(kunigunde_question, "This is kind of a weird question but... where am I?")
        {
            // First Question...
            if (scr_quest_get_state("kunigundeState") == 0)
            {
                scr_event_build_dialogue(P_NAME, s_port_hoopz, "This is kind of a weird question but... where a-");
                scr_event_build_event_snippet(first_question_snippet);
            }
            // Normal...
            else
            {
                scr_event_build_dialogue(P_NAME, s_port_hoopz, "This is kind of a weird question but... where am I?");
                scr_event_build_dialogue("Kunigunde", "s_port_kunigunde", "Oh, just the Industrial Park, a dwarfzone on the edge of Tir na Nog. It's basically a rest stop on the way to bigger, better places. It's boring, nothing to see here. I suppose if you're looking for -real- night life, you'd head to Brain City. I hear it's supposed to be west of here. Was there anything else?");
                scr_event_build_goto_choice(kunigunde_question);
            }
        }
        // Cuchulainn
        with scr_event_build_add_choice(kunigunde_question, "Do you know anything about Cuchulainn?")
        {
            // First Question...
            if (scr_quest_get_state("kunigundeState") == 0)
            {
                scr_event_build_dialogue(P_NAME, s_port_hoopz, "Do you know anything about Cuchul-");
                scr_event_build_event_snippet(first_question_snippet);
            }
            // Normal...
            else
            {
                scr_event_build_dialogue(P_NAME, s_port_hoopz, "Do you know anything about Cuchulainn?");
                scr_event_build_dialogue("Kunigunde", "s_port_kunigunde", "Ugh, Cuchulainn. How tiresome. Well nobody knows -too- much about him, but he is supposed to be a benevolent AI. Anyway, I heard a rumor that Cuchulainn is located in the exact center of the Necron 7. Ooh, and he's the ghost of a Celtic warlord from long ago. Oh, ex-Celtic. Anything else?");
                scr_event_build_goto_choice(kunigunde_question);
            }
        }
        // L.O.N.G.I.N.U.S.?
        if (scr_quest_get_state("mainQuest") == 0)
        {
            with scr_event_build_add_choice(kunigunde_question, "Who or what is L.O.N.G.I.N.U.S.?")
            {
                // First Question...
                if (scr_quest_get_state("kunigundeState") == 0)
                {
                    scr_event_build_dialogue(P_NAME, s_port_hoopz, "Who or what is L.O.N.G.I-");
                    scr_event_build_event_snippet(first_question_snippet);
                }
                // Normal...
                else
                {
                    scr_event_build_dialogue(P_NAME, s_port_hoopz, "Who or what is L.O.N.G.I.N.U.S.?");
                    scr_event_build_dialogue("Kunigunde", "s_port_kunigunde", "Oh, L.O.N.G.I.N.U.S.? I think that's the name of those little goblin things that live outside of town. They've got a village around here made out of garbage, if you could believe it. Terribly ill-behaved and horrendously smelly. I try to stay away from them.");
                    scr_event_build_goto_choice(kunigunde_question);
                }
            }
        }
        // Anything happening?
        with scr_event_build_add_choice(kunigunde_question, "Is anything interesting happening?")
        {
            // First Question...
            if (scr_quest_get_state("kunigundeState") == 0)
            {
                scr_event_build_dialogue(P_NAME, s_port_hoopz, "Is anything interesting ha-");
                scr_event_build_event_snippet(first_question_snippet);
            }
            // Normal...
            else
            {
                scr_event_build_dialogue(P_NAME, s_port_hoopz, "Is anything interesting happening?");
                scr_event_build_dialogue("Kunigunde", "s_port_kunigunde", "Well people always come and go because the Industrial Park is so close to Tir na Nog. Most of the time it's vagrants or bums on the run, but sometimes it's someone interesting. So I guess if you've got the time, you could always do some people watching. Is that all?");
                scr_event_build_goto_choice(kunigunde_question);
            }
        }
        // What's the stone with the gun?
        if (scr_time_get() < 10) && (scr_quest_get_state("gunStone") < 2) {
            with scr_event_build_add_choice(kunigunde_question, "What's that stone with the gun in it?")
            {
                // First Question...
                if (scr_quest_get_state("kunigundeState") == 0)
                {
                    scr_event_build_dialogue(P_NAME, s_port_hoopz, "What's that stone wi-");
                    scr_event_build_event_snippet(first_question_snippet);
                }
                // Normal...
                else
                {
                    scr_event_build_dialogue(P_NAME, s_port_hoopz, "What's that stone with the gun in it?");
                    scr_event_build_dialogue("Kunigunde", "s_port_kunigunde", "That old thing has been sitting there for as long as I can remember. According to legend, only one pure of heart can lift the gun from the stone. But you know what I think? That's just an old wives' tale, I think it's stuck for good. Don't even bother.");
                    scr_event_build_goto_choice(kunigunde_question);
                }
            }
        }
        
        // Suresh says... you know more.
        if (scr_quest_get_state("figbottomQuest") == 7)
        {
            with scr_event_build_add_choice(kunigunde_question, "Suresh says you know more about Figbottom than you're telling.")
            {
                scr_event_build_dialogue(P_NAME, s_port_hoopz, "Okay Kunigunde, Suresh says you know more than you're telling, that you used to know Figbottom back in Tir na Nog.");
                scr_event_build_dialogue("Kunigunde", "s_port_kunigunde", "Well of course I knew him, always rooting around in the trash and making a racket. Everyone here -knew- him. But I would never, EVER associate with him.");
                scr_event_build_dialogue(P_NAME, s_port_hoopz, "Then what about the tontine?");
                scr_event_build_dialogue("Kunigunde", "s_port_kunigunde", "Oh, well that's something else entirely. Yes, we were both the last members of a money pool and whoever was last to die would get the money, but I'm certainly not so uncouth as to dirty my hands to get it. I certainly don't hope you suspect someone of -my- stature of stooping so low.");
                scr_event_build_dialogue(P_NAME, s_port_hoopz, "Actually, I'm not so sure of that, especially since you told me you didn't know Figbottom before. In fact, it seems like quite a few people profited from his death. I think it's time for me to head back to Marshal Masego and go over the evidence with her.");
                scr_event_build_dialogue("Kunigunde", "s_port_kunigunde", "Hmph! To be treated so inconsiderately! Yes, I received quite a large sum of money on Figbottom's death, but I surely didn't hasten it. And to think that I would be a suspect in this unfortunate accident! How EXTREMELY inconvenient.");
                scr_event_build_dialogue(P_NAME, s_port_hoopz, "Yeah, right...");
                scr_event_build_quest_state("figbottomQuest", 8);
            }
        }
        // Kunigunde, you are a primary suspect!
        if (scr_quest_get_state("figbottomQuest") == 8)
        {
            with scr_event_build_add_choice(kunigunde_question, "You're one of the primary suspects in the disappearance of Figbottom.")
            {
                scr_event_build_dialogue(P_NAME, s_port_hoopz, "Just so you know, I consider you one of the primary suspects in the disappearance of Figbottom and it seems to me that you profited the most from his death.");
                scr_event_build_dialogue("Kunigunde", "s_port_kunigunde", "Well I certainly hope this isn't how you begin most conversations! I can assure you that although I recieved a large sum of money on Mr. Figbottom's demise, I played absolutely no role in it. It's unfortunate that he passed away and even more unfortunate that you'd suspect me. Now if you're all done, I'd like you to leave.");
                scr_event_build_dialogue(P_NAME, s_port_hoopz, "You better not leave town...");
            }            
        }
        // Investigating Figbottom's disappearance.
        if (scr_quest_get_state("figbottomQuest") == 4)
        {
            with scr_event_build_add_choice(kunigunde_question, "I'm investigating Figbottom's disappearance, do you know anything?")
            {
                // First question...
                if (scr_quest_get_state("kunigundeState") == 0)
                {
                    scr_event_build_dialogue(P_NAME, s_port_hoopz, "I'm investigating Figbottom's disappea-");
                    scr_event_build_event_snippet(first_question_snippet);
                }
                // Normal...
                else
                {
                    scr_event_build_dialogue(P_NAME, s_port_hoopz, "I'm investigating Figbottom's disappearance, do you know anything?");
                    scr_event_build_dialogue("Kunigunde", "s_port_kunigunde", "Oh dear, the business with Figbottom. I'd heard about it, but I know very little. I mean, how COULD I know? I never spoke to the man. He was always so... dirty and disheveled. He really could have done with a bath. Well I suppose it's too late for that now, but the sentiment remains.");
                    scr_event_build_dialogue(P_NAME, s_port_hoopz, "You haven't noticed anything suspicious or concerning lately?");
                    scr_event_build_dialogue("Kunigunde", "s_port_kunigunde", "Well, I've noticed a particularly shifty-looking vagrant hanging around lately. I believe his name is Morrison or somesuch. He usually loiters around the northeast end of town, muttering to himself. I'd be careful if I were you, he's got a crazy look in his eyes, like he's got nothing to lose. If anyone knows something about Figbottom's disappearance, it's him. Certainly not me, though. I never spoke to him.");
                    scr_event_build_dialogue(P_NAME, s_port_hoopz, "Thank you. I appreciate it.");
                    scr_event_build_dialogue("Kunigunde", "s_port_kunigunde", "Was there anything else?");
                    scr_event_build_quest_state("figbottomQuest", 5);
                    build_remove_choice(kunigunde_question, investigation);
                    scr_event_build_goto_choice(kunigunde_question);
                }
            }
        }
        
        // What happened to the gun in the stone?
        if (scr_time_get()) > 9 && (scr_quest_get_state("gunStone") > 0)
        {
            with scr_event_build_add_choice(kunigunde_question, "What happened to the gun in the stone?")
            {
                // First question...
                if (scr_quest_get_state("kunigundeState") == 0)
                {
                    scr_event_build_dialogue(P_NAME, s_port_hoopz, "What happened to the g-");
                    scr_event_build_event_snippet(first_question_snippet);
                }
                // Normal...
                else
                {
                    scr_event_build_dialogue(P_NAME, s_port_hoopz, "What happened to the gun in the stone?");
                    scr_event_build_dialogue("Kunigunde", "s_port_kunigunde", "Oh, that old thing? I hardly ever paid attention to it. I hear someone came along and just pulled it right out, just like that! Can you believe it? They say only one pure of heart could pull it out. I feel sorry for anyone who even bothered to try.");
                    scr_event_build_goto_choice(kunigunde_question);
                }
            }
        }
        // Shop?
        with scr_event_build_add_choice(kunigunde_question, "Is there anywhere I can shop here?")
        {
            // First question...
            if (scr_quest_get_state("kunigundeState") == 0)
            {
                scr_event_build_dialogue(P_NAME, s_port_hoopz, "Is there anywhere I can sh-");
                scr_event_build_event_snippet(first_question_snippet);
            }
            // Normal...
            else {
                scr_event_build_dialogue(P_NAME, s_port_hoopz, "Is there anywhere I can shop around here?");
                scr_event_build_dialogue("Kunigunde", "s_port_kunigunde", "TODO: No?"); // TODO: text?
                scr_event_build_goto_choice(kunigunde_question);
            }
        }
        // Cyberdwarf?
        if (scr_quest_get_state("mainQuest") == 0)
        {
            with scr_event_build_add_choice(kunigunde_question, "Do you know anything about the Cyberdwarf?")
            {
                // First question...
                if (scr_quest_get_state("kunigundeState") == 0)
                {
                    scr_event_build_dialogue(P_NAME, s_port_hoopz, "Do you know anything about the Cy-");
                    scr_event_build_event_snippet(first_question_snippet);
                }
                // Normal...
                else
                {
                    scr_event_build_dialogue(P_NAME, s_port_hoopz, "Do you know anything about the Cyberdwarf?");
                    scr_event_build_dialogue("Kunigunde", "s_port_kunigunde", "The Cyberdwarf? Hmmm, that name sounds familiar, let me think... oh yes, the Cyberdwarf! I believe he's supposed to be a malevolent AI or somesuch. Cruel warlord leading his band of brigands against the commoners? Certainly not my affair. I wouldn't associate with it if I were you, malevolent AIs are such terrible creatures.");
                    scr_event_build_goto_choice(kunigunde_question);
                }
            }
        }
        
        // Chup Quest
        if (scr_chup_available("kunigunde") == true)
        {
            // Sell Chup
            with scr_event_build_add_choice(kunigunde_question, "Hey lady... you want any chups?")
            {
                scr_event_build_dialogue(P_NAME, s_port_hoopz, "Dang, you're lookin' good lady. I bet you're feeling pretty good too. But you know what would make you feel even better?");
                scr_event_build_dialogue("Kunigunde", "s_port_kunigunde", "Oh, finally someone notices. It only took FOREEEEVER. Yes, yes, the coat's a Gagliardi - real mink! I got it from a haute little boutique in Brain City - you wouldn't belieeeeve the shipping cost. I'm surprised they even shipped to a hole-in-the-wall like the Industrial Park, but I suppose business is business. Oh, what would I even do without DwarfNET shopping?");
                scr_event_build_dialogue(P_NAME, s_port_hoopz, "Yeah, that's great. Hey, check these out... quick! Don't let anyone see... Grade A Neo New York-quality Bug Hoots. These badboys were hand-picked and processed in the darkest, most dangerous jungles by sweating immigrants. This is the good stuff, the stuff that'll make you fly like a kite.");
                scr_event_build_dialogue("Kunigunde", "s_port_kunigunde", "M-my Heavens! Are you asking me what I think you're asking?");
                scr_event_build_dialogue(P_NAME, s_port_hoopz, "Uhhh, maybe...");
                scr_event_build_dialogue("Kunigunde", "s_port_kunigunde", "Well I'll have you know that I'm no freakazoid, I'm not a criminal and I want no part in your goopenthalers! Get away from me, miscreant! Ugh, the unmitigated nerve! To think that I, Kunigunde, the Industrial Park's premier socialite, would fraternize with a lowlife like you! Get away from me! I'm informing Marshal Masego at once!");
                scr_event_build_dialogue(P_NAME, s_port_hoopz, "(Shuck it, I think I blew it with her...)");
                scr_event_build_quest_state("kunigundeChup", 1);
                scr_event_build_quest_state_add("chupSuspicion", 1);
                scr_event_build_quest_state("kunigundeChupHandler", 0);
                scr_event_build_execute_event_script(event_dz1_kunigunde01)
            }
        }
        
        // No more questions.
        with scr_event_build_add_choice(kunigunde_question, "No, I guess that's it.")
        {
            scr_event_build_dialogue(P_NAME, s_port_hoopz, "I guess that's it for now, but I'll be back if I need anything else.");
            scr_event_build_dialogue("Kunigunde", "s_port_kunigunde", "Of course, of course.");
        }
    }
    
    scr_event_advance(event);
}
