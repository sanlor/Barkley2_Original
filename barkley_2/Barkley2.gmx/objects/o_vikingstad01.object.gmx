<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>s_vikingstad01</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>oDuergar</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Create
name = "vikingstad";
event_inherited();
if (guplur) exit;

scr_actor_unsetRigid(id);
faceAuto = 0; // Disables vikingstad from swapping xscale

scr_event_hook_onInteract(event_cinema);
event_user(4);

// Cuchu's Lair //
if room = r_chu_arena01 then 
    {
    scr_actor_unsetRigid(id);
    scr_entity_set_look_walk_mirror(s_vikingstad01, s_vikingstadNE, s_vikingstadSE);
    scr_entity_look(id, SOUTHWEST);
    }
    
// Rebel base
if room = r_tnn_rebelbase02 then 
    {
    scr_actor_unsetRigid(id);
    scr_entity_set_look_walk_mirror(s_vikingstad01, s_vikingstadNE, s_vikingstadSE);
    scr_entity_look(id, SOUTHWEST);
    }

// Mortgage sprite //
state = 2;
curSub = 0;
frmSpd = 6;
if (room == r_tnn_mortgage01)
    {
    shadow_radius = false;
    scr_actor_unsetRigid(id);
    y += 21;
    scr_entity_animation_define("default", s_vikingstadMortgage01, 0, 31, 0);
    scr_entity_animation_set(o_vikingstad01, "default");
    scr_entity_animation_define("fucker", s_vikingstadMortgage01, 0, 1, 0);
    }
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>// Inherited //
event_inherited();

// Pause //
if paused() exit;

// Wait in line minigame //
if instance_exists(o_mg_wait_control01) then
    {
    if o_mg_wait_control01.hoopz_position != 13 or o_mg_wait_spot13.dwarf_occupation = true then    
        {
        _disableOutline = true;
        _interactive = false;
        } 
    else if o_hoopz.move_x = 0 and o_hoopz.move_y = 0 then
        {
        _disableOutline = false;
        _interactive = true;
        }
    }
    
// Mortgage room shyte //
if (room == r_tnn_mortgage01) then
{
    // Stay above the desk //
    scr_dny(-15);
    
    if global.event = false then
        {
        event_user(state);
        scr_entity_animation_set(id, "default");
        scr_entity_animation_setFrame("default", floor(curSub));
        }
    else
        {
        scr_entity_animation_set(id, "fucker");
        }
}

exit;
{
    var framePick = scr_entity_animation_getFrame("pick");
    var frameEnd = scr_entity_animation_getFrame("end");
    
    // After picking up the papers begin the Paperwork animation //
    if framePick = 10 then scr_entity_animation_set(o_vikingstad01, "paperwork");
    
    // After rining the bell animation go to idling animation //
    if frameEnd = 30 then scr_entity_animation_set(o_vikingstad01, "idling");
    
    // Ringing the bell //
    if frameEnd = 28 then with o_mg_wait_control01 event_user(0);
}
    
    
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="14">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Script for Vikingstad in the TNN Housing Department
/* 
Variables
vikingstadTnn
    0 = no progress with Vikingstad
    1 = attempted to pay a mortgage, one way or another
    2 = you've paid only Wilmers Mortgage
    3 = you've paid only Aelfleda's Mortgage
    4 = you've paid BOTH Mortgages

wilmerEvict
     0 - Wilmer hasn't sent you on the mission to pay his rent.
     1 - Wilmer HAS sent you on the mission to pay his rent.
     2 - Wilmer has been EVICTED!
     3 - Hoopz has talked to Wilmer after he has been kicked out
     4 - Mortgage paid via Minigame
     5 - Told Wilmer you paid his mortgage
     6 - Mortgage paid via governor
     7 - Told Wilmer Governor forgave him
     8 = repeating dialoge if he's been Evicted

mortgageOver
    0 = not over
    1 = the quest is over
    2 = Door close, it's all shut down
    
wilmerPaymentFailure
    0 = Not failed
    1 = Failed to pay because didn't have enough money
    2 = Failed to pay because got into a dispute over the amount
    3 = Failed to pay because was too late, and you know it
    4 = Failed to pay because was too late, unknown to you
*/
script = "
IF wilmerEvict == 1 | GOTO | VIKINGSTAD01
IF vikingstadState == 1 | GOTO | VIKINGSTAD02
GOTO | VIKINGSTAD00

PAYRENTWILM
QUEST  | money -= @money_vikingstadDemand1@
DIALOG | P_NAME | Well... I guess I've got no choice. I don't want Mr. Wilmer to get evicted after all he's done for me. Okay, here's the money...
BREAKOUT | clear
DIALOG | Vikingstad | Gwahaha, thanks for your business! We'll make sure Wilmer gets to stay in house a little longer. Now get outta here, we're closing! It's my lunch break and I'll be damned if I miss my potted meat with termite spread for you. Scram, kid!
NOTE   | give | Wilmer's Amortization Schedule
QUEST  | wilmerEvict = 4
IF vikingstadTnn &lt; 2 | QUEST | vikingstadTnn = 2
IF vikingstadTnn &gt;= 2 | QUEST | vikingstadTnn = 4
QUEST  | mortgageOver = 1
QUEST  | wilmerSleep = 0
GOTO   | ANYTHINGELSE

NOTE_CHOOSE
NOTE | select | Vikingstad
IF note == exit | GOTO | NOTE_EXIT
IF note == none | GOTO | NOTE_NONE
IF note == Wilmer's Amortization Schedule | GOTO | NOTE_WILMER
IF note == Aelfleda's Eviction | GOTO | NOTE_AELFLEDA
GOTO | NOTACCEPTED

NOTE_EXIT
DIALOG | Vikingstad | Wait so do you have something or not?
DIALOG | P_NAME = s_port_hoopzSurprise | Oh well um-
GOTO   | ANYTHINGELSE

NOTE_NONE
DIALOG | P_NAME | Oh well, um I don't have any papers, really. Looks like I gummed this one up.
DIALOG | Vikingstad | You're gonna be like gum at the bottom of my boot if you don't get the fuck out of my office.
DIALOG | P_NAME | Oh. Um, sorry.
DIALOG | Vikingstad | Stuff your sorries in your ballsac, chump. Next.
QUEST  | vikingstadTnn = 1
QUEST  | mortgageOver = 1
QUEST  | wilmerSleep = 0
GOTO   | MORTGAGEFALLEN

NOTE_WILMER
NOTIFY | Gave Vikingstad Wilmer's Amortization Schedule
DIALOG | P_NAME | Um, I'm here on behalf of Mr. Wilmer. He needs me make his mortgage payment... um... I've never done this before, am I doing it right?
DIALOG | Vikingstad | Mr. Wilmer... yes, yes, Bungalow 2... more like Mr. Delinquent! That'll be @money_wilmerMortgage@ neuro-shekels to renew... with a @money_wilmerSurcharge@ surcharge for umm, let's call it /'expedient processing,/' bringing the total to @money_vikingstadDemand1@ neuro-shekels!
DIALOG | P_NAME = s_port_hoopzSurprise | (But... Wilmer said it would only be @money_wilmerMortgage@ neuro-shekels!
DIALOG | Vikingstad | Is crybaby gonna go to the back of the line or is crybaby gonna pay up?
IF money &lt; @money_vikingstadDemand1@ | GOTO | SHORTONMONEYWILM
IF money &gt;= @money_vikingstadDemand1@ | GOTO | ENOUGHMONEYWILM

SHORTONMONEYWILM
DIALOG | P_NAME | I... I don't have that much... I already spent it.
DIALOG | Vikingstad | Well then you're outta luck, kid! You stood in line for all that time for nothing! It's my lunch break and we're closing in a few minutes! I'll be damned if I miss my potted meat with termite spread for you. Scram, kid!
DIALOG | P_NAME | But I really have to renew Mr. Wilmer's mortgage! C'mon, cut me a break just this once!
DIALOG | Vikingstad | And I'VE really gotta get to this potted meat! I told you to scram! Don't make me get the guards!
DIALOG | P_NAME = s_port_hoopzSad | (Dad jiggit... I blew it, Mr. Wilmer...)
QUEST  | vikingstadTnn = 1
QUEST  | mortgageOver = 1
QUEST  | wilmerEvict = 2
QUEST  | wilmerSleep = 0
QUEST  | wilmerPaymentFailure = 1

ENOUGHMONEYWILM
BREAKOUT | add | money
CHOICE   | Pay the mortgage?
REPLY    | PAYRENTWILM | Pay up already.
REPLY    | DISPUTEWILM | Dispute it! It should only cost @money_wilmerMortgage@!

DISPUTEWILM
DIALOG | P_NAME = s_port_hoopzSurprise | B-but Mr. Wilmer said it would only be @money_wilmerMortgage@ neuro-shekels! He gave me @money_wilmerMortgageTotal@ neuro-shekels, @money_wilmerMortgage@ for you, and @money_wilmerMortgageBonus@  for me for helping him out.
DIALOG | Vikingstad | Well it looks like it's @money_vikingstadDemand1@ for me and @money_vikingstadTease@ for you now! Gwahaha!
CHOICE | Submit to the shakedown?
REPLY  | PAYRENTWILM | Fine, here's the money.
REPLY  | REFUSE | Frup this, I'm out of here.

REFUSE
DIALOG   | P_NAME = s_port_hoopzAngry | You've got some nerve, and won't get a nickel of Wilmer's money. I'm contacti-
BREAKOUT | clear
DIALOG   | Vikingstad | Contacting the what?! Ain't nobody here gives a damn about your senile old grandpa. Now scram and use whatever rest of the money you haven't STOLEN, and buy that old timer a nice warm tarp for the streets! Gwahaha!
QUEST    | vikingstadTnn = 1
QUEST    | mortgageOver = 1
QUEST    | wilmerEvict = 2
QUEST    | wilmerSleep = 0
QUEST    | wilmerPaymentFailure = 2
GOTO     | MORTGAGEFALLEN

MORTGAGEFALLEN
DIALOG | P_NAME | ...

NOTE_AELFLEDA
IF     | chanticleerRoommate == 3 | GOTO | AELFLEDA_CHANTI
NOTIFY | Gave Vikingstad Aelfleda's Eviction
DIALOG | P_NAME | Um, I'm here on behalf of Aelfleda. I think she's battling foreclosure.
DIALOG | Vikingstad | What do you have some kind of generous bone? I know a guy in Brain City who can help you remove that.
DIALOG | P_NAME = s_port_hoopzSad | I like my generous bone...
DIALOG | Vikingstad | Whatever, @money_aelfledaRent@ shekels, and well what do we have here, another surcharge for not going paperless... that's @money_vikingstadAelfleda@, so a total of @money_aelfledaFull@!
IF money &lt; @money_aelfledaFull@ | GOTO | SHORTONMONEYAELF
IF money &gt;= @money_aelfledaFull@ | GOTO | ENOUGHMONEYAELF

AELFLEDA_CHANTI
DIALOG | P_NAME | (Wait a minute... Aelfleda's already moved in with Chanticleer, I'd be a total dullard to pay this now!)
GOTO   | NOTE_CHOOSE

SHORTONMONEYAELF
DIALOG | P_NAME = s_port_hoopzSad | I... I don't have that much... 
DIALOG | Vikingstad | Well then why the hell are you giving me this paper?! I swear to Cuchu that you dwarfs are lost as a jungler trying to hard carry.
DIALOG | P_NAME = s_port_hoopzSad | ._._._ 
QUEST  | vikingstadTnn = 3
QUEST  | mortgageAelfledaNoMoney = 1
QUEST  | mortgageOver = 1
QUEST  | wilmerSleep = 0
GOTO   | ANYTHINGELSE

ENOUGHMONEYAELF                     
BREAKOUT | add | money
CHOICE   | Pay off Aelfleda's Overages?
REPLY    | PAYRENTAELF | Pay it ... forward.
REPLY    | DISPUTEAELF | Dispute it! It should only cost @money_aelfledaRent@!

PAYRENTAELF
DIALOG   | P_NAME | If I had a grandma, it would be like she might have always said. /'A good deed never gets punished./' Here you go.
QUEST    | money -= @money_aelfledaRent@
DIALOG   | Vikingstad | That's not how that go-___ eh you'll figure it out on your own, gruel for brains. Out in Tir na nOg, everyone is punished. Gwahahahaha!
BREAKOUT | clear
NOTE     | give | Aelfleda's Eviction
QUEST    | aelfledaEvict = 2
IF vikingstadTnn &lt; 2 | QUEST | vikingstadTnn = 3
IF vikingstadTnn &gt;= 2 | QUEST | vikingstadTnn = 4
QUEST    | mortgageOver = 1
QUEST    | wilmerSleep = 0
GOTO     | ANYTHINGELSE

DISPUTEAELF
DIALOG  | P_NAME | Oh, I um I don't want to pay that. I think I made a mistake.
DIALOG  | Vikingstad | You sure did._ Oh and I'm keeping this. Due to your_ /'heroism/' this little bitch Aelfleda is going to get a very personal escort into the Hoosegow!
PLAYSET | o_cts_hoopz | surpriseNE | surpriseHoldNE
WAIT    | 0.5
DIALOG  | P_NAME = s_port_hoopzShock | Oh no!
DIALOG  | Vikingstad | Gwahahahah! Scram kid!
NOTE    | give | Aelfleda's Eviction
QUEST   | aelfledaEvict = 3
IF vikingstadTnn &lt; 2 | QUEST | vikingstadTnn = 1
QUEST   | mortgageOver = 1
QUEST   | wilmerSleep = 0
GOTO    | ANYTHINGELSE

NOTACCEPTED
DIALOG | Vikingstad | ._._._ what the hell is this garbage? I oughta throw you in the hoosegow for showing me this bullshit. Now show me official Cuchulainn Documents or go suck a bag of eggs.
GOTO   | NOTE_CHOOSE

GOVERNOR
DIALOG | Vikingstad | M-Mr. Governor, sir! If I had known you were in line, I would've let you right through! What can I do for you, sir?
DIALOG | Governor Elagabalus | Good eye, subordinate! It is, in fact, I, the Governor. Be sure to tell your friends and coworkers that I, the 100% authentic Governor was here!

ANYTHINGELSE
DIALOG | Vikingstad | Anything else? Hurry up!
CHOICE | Anything else? (you should hurry)
REPLY  | MORENOTES | I have something else!
REPLY  | THATSIT | I guess that's it.

MORENOTES
DIALOG | P_NAME | Well I have something else for you...
DIALOG | Vikingstad | Make it quick.
GOTO   | NOTE_CHOOSE

THATSIT
DIALOG | P_NAME | I guess that's it...
DIALOG | Vikingstad | Good, closer to lunch time with every slack-jawed dwarf processed. Now scram!
GOTO   | MORTGAGEFALLEN

VIKINGSTAD02
DIALOG | Vikingstad | What're you doing still standing around here? I told you to scram! Now beat it, kid! We're closing soon enough!
GOTO   | MORTGAGEFALLEN

VIKINGSTAD01 
QUEST  | mortgageDoorRealize = 1
DIALOG | P_NAME | Am I up next? Is this the Housing Department?
DIALOG | Vikingstad | Yes, yes, this is the Department of Population and Housing... where's your papers?
DIALOG | P_NAME | Oh umm...
QUEST  | vikingstadState = 1
QUEST  | time += 1
GOTO   | NOTE_CHOOSE

VIKINGSTAD00
DIALOG | P_NAME | ...
WAIT   | 0.3
DIALOG | Vikingstad | ._._._ well?
DIALOG | P_NAME | Umm... I'm not sure why I'm here.
WAIT   | 1
DIALOG | Vikingstad | You waited in that line for this?_ Next.
QUEST  | vikingstadState = 1
GOTO   | MORTGAGEFALLEN
";
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="13">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// ANIMATION: End
curSub += dt_sec() * frmSpd;
curSub = clamp(curSub, 15, 31);
if (curSub &gt;= 31) 
{ 
    curSub = 0; 
    state = 0;
    with (o_mg_wait_control01) event_user(0);
}


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="12">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// ANIMATION: Paperwork
curSub += dt_sec() * frmSpd;
if (curSub &gt;= 14) { curSub = 10; }
curSub = clamp(curSub, 10, 14);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="11">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// ANIMATION: Pick
curSub += dt_sec() * frmSpd;
if (curSub &gt;= 10)
{
    curSub = 10;
    state = 2;
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// ANIMATION: Idle
curSub = 0;

</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>16,32</point>
    <point>16,16</point>
  </PhysicsShapePoints>
</object>
