<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>s_sewer_switch01</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-100</depth>
  <persistent>0</persistent>
  <parentName>InteractiveActor</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>// Inheritance //
event_inherited();
shadow_visible = false;

Animation("define", "default", sprite_index, 0, 1, 0);
Animation("define", "flipped", sprite_index, 1, 1, 0);

scr_event_hook_onInteract(event_cinema);

obj = instance_create(x - 12, y + 44, oDummy);
script = "
MOVETO  | o_cts_hoopz | " + string(obj) + " | MOVE_NORMAL
WAIT    | 0
USEAT   | EAST
SOUND   | sn_mg_puzzlelock_open1
WAIT    | 0.2
EVENT   | " + string(id) + " | 10
WAIT    | 0.2
WAIT    | 1.5
QUEST   | switchPrison0 = 1
QUEST   | prisonPatrollers = 2
QUEST   | junklordSpecial = 0
// RIOT
FADE   | 1 | 1
WAIT   | 1
Duergar| alive | dozier
IF duergar == alive | CREATE | o_dozier01 | " + string(o_cinema31.x) + " | " + string(o_cinema31.y) + "
IF duergar == alive | CREATE | o_astyages01 | " + string(o_cinema6.x) + " | " + string(o_cinema6.y) + "
Camera | snap | o_cinema3
FRAME  | CAMERA_FAST | o_cinema3
WAIT   | 0
FADE   | 0 | 1
WAIT   | 1
IF duergar == alive | MOVETO | o_dozier01 | o_cinema1 | MOVE_FAST
IF duergar == alive | MOVETO | o_astyages01 | o_cinema2 | MOVE_FAST
WAIT   | 0
IF duergar == alive | CREATE | oPrisonDozier | " + string(o_cinema1.x) + " | " + string(o_cinema1.y) + "
IF duergar == alive | CREATE | oPrisonAstyages | " + string(o_cinema2.x) + " | " + string(o_cinema2.y) + "
IF duergar == alive | Misc   | visible | o_dozier01 | 0
IF duergar == alive | Misc   | visible | o_astyages01 | 0
//Misc   | flip | oPrisonDozier | 1
//WAIT   | 0.5
//Misc   | flip | oPrisonAstyages | 1
//WAIT   | 0.5
IF duergar == alive | Emote  | ! | oPrisonDozier | 0 | 0
IF duergar == alive | Emote  | ! | oPrisonAstyages | 0 | 0
IF duergar == alive | DIALOG | Dozier | What the scrooge!? Someone just hit the evacuation switch! All the gates are open! 
IF duergar == alive | DIALOG | Astyages | The Hoosegowers are making a run for it! Hold the line!
CREATE | oPrisonRiot  | " + string(o_cinema0.x) + " | " + string(o_cinema0.y) + "
WAIT   | 15
//WAIT was 16
FADE   | 1 | 1
WAIT   | 1
Destroy| oPrisonRiot
Destroy| oPrisonDozier
Destroy| oPrisonAstyages
IF duergar == alive | Destroy| o_dozier01
IF duergar == alive | Destroy| o_astyages01
Duergar| kill | dozier
Duergar| kill | astyages
Destroy| oPrisonRioter
Destroy| oPrisonBlood
Camera | snap | o_cts_hoopz
FRAME  | CAMERA_FAST | o_cts_hoopz
FADE   | 0 | 1
WAIT   | 1
QUEST  | prisonEnding = 1
QUEST  | prisonDoors = 1
";



exit; // OBSOLETE
/*
CREATE | oPrisonDozier | " + string(o_cinema1.x) + " | " + string(o_cinema1.y) + "
CREATE | oPrisonAstyages | " + string(o_cinema2.x) + " | " + string(o_cinema2.y) + "
*/
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Stop alarm
audio_stop_sound_ext("sn_pdt_alert01");
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="20">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Flip the lever
Animation("set", id, "flipped");
_disableOutline = true;
_interactive = false;
with (oPrisonCCTV) Animation("play and set", id, "shutdown", "off");
with (o_fct_alarmWall01) Animation("set", id, "on");
instance_create(x, y, o_effect_alarmLight);
SOUNDLOOP("sn_pdt_alert01");
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Fill all guns to 100%
for (i = 0; i &lt; 25; i += 1)
    {
    if (Gun("exists", i))
        {
        Gun("ammo", i, Gun("capacity", i));
        }
    }
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>instance_destroy();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (Quest("switchPrison0") == 1)
{
    Animation("set", id, "flipped");
    _disableOutline = true;
    _interactive = false;
    with (oPrisonCCTV) Animation("set", id, "off");
    //with (o_fct_alarmWall01) Animation("set", id, "on");
    //SOUNDLOOP("sn_pdt_alert01");
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
