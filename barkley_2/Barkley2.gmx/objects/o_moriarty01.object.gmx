<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>s_moriarty01</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>InteractiveActor</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>// Inheritance //
event_inherited();

// If arrested, will not be visible anymore.
if scr_quest_get_state("moriartyArrest") == 1 then scr_event_interactive_deactivate();

scr_entity_animation_new("default");
scr_entity_animation_setSpriteIndex("default", s_moriarty01);
scr_entity_animation_setSpeed("default", 0);
scr_entity_animation_setRange("default", 0, 17);

scr_event_hook_onCommon(event_cinema);

idleTime = 0;
timerfrm = 0;
animInterv = 6;

/*
    figbottomQuest
        0 - Nothing has been done
        1 - Heard about Figbottom Quest
        2 - Failed Quest?
        3 - Quest accepted
        4 - Suresh tells you to talk to Kunigunde
        5 - Kunigunde tells you to talk to Moriarty
        6 - Moriartys clue about Suresh        
        7 - Sureshs clue about Kunigunde
        8 - Kunigunde talked to about tontine
        9 - Someone has been arrested
        
    moriartyArrest
        0 - Not arrested
        1 - Arrested for Figbottoms murder
*/

script = "
IF figbottomQuest == 5 | GOTO | FIG5
IF figbottomQuest == 6 | GOTO | FIG6   
IF figbottomQuest == 9 | GOTO | FIG9   
IF moriartyArrest != 1 | GOTO | NOT_ARRESTED
    
FIG5
DIALOG | Moriarty | `w1`Meat... meat on the bone... meat on the bone...`w0`
DIALOG | P_NAME   | Um, are you uh... Morrison?
DIALOG | Moriarty | `w1`Moriarty... Flesh... you have... tender... delicious... flesh...`w0`
DIALOG | P_NAME   | It's one of the symptoms of being alive, I guess. I've got a couple questions for you about the missing junk prospector Figbottom. Think you've got the time?
DIALOG | Moriarty | `w1`Figbottom... I know that guy... I saw him digging around in the trash with his buddy a couple days ago... His friend looked too gristly but Figbottom... Figbottom looked perfect... they found this thing in the trash, a jerkin... they fought over the jerkin but in the end Figbottom took it... but today his friend is wearing it...`w0`
KNOW   | knowIllicitIndustrialActivity | 1
DIALOG | P_NAME   | What the shuck... Suresh didn't mention that to me. I've got one more question for you, Moriarty. Are you uh... eating a glove?
DIALOG | Moriarty | `w1`Meat on the bone... gotta get that... meat on the bone...`w0`
DIALOG | P_NAME   | I sincerely hope that's just a glove you picked up off the ground and not Figbottom's hand. I'll be back if I've got anymore questions.
DIALOG | Moriarty | `w1`Meat....... on the bone...`w0`
QUEST  | figbottomQuest = 6

FIG6
DIALOG | Moriarty | `w1`You've got... meat... meat on the bone... why don't you spend some... time with me...`w0`

FIG9
DIALOG | Moriarty | `w1`Soft, pliant flesh, still warm, the cruor still wet... chewy tendons and sinews, brittle bones snapping under compaction, giving way to succulent marrow... meat on the bone... meat on the bone...`w0`

NOT_ARRESTED
DIALOG | Moriarty | `w1`Meat on the bone... meat on the bone... gotta get that meat on the bone...`w0`
";

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited();
if (paused()) exit;

if(timerfrm&lt;animInterv) ///overall animation timing. Temporary fix until we have callbacks
{
    timerfrm+=5*dt();
}
else
{
    timerfrm -= animInterv;
    event_user(5);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="15">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var playernear;
playernear = false;
var pdist = point_distance(x,y,o_hoopz.x,o_hoopz.y)
if(pdist&lt;32){playernear = true;}

//curImg = scr_entity_animation_getImage("default");
switch(image_index)
{
    case 0:////Idle frame
        idleTime+=1;
        if(idleTime&gt;6)
        {
            if(random(10)&lt;8)
            {
                image_index = choose(1,7,11);
                if(image_index!=1)
                {
                    animInterv = choose(3,4,5,6);
                }
            }
            else{idleTime = 3;}
        }
        break;
        
    case 6:////End of drool
        if(random(10)&lt;6){image_index=1;}
        else
        {
            image_index = 0;
            idleTime = 0; animInterv = 6;
        }
        break;
        
    case 10:///Hiccup
        if(random(10)&lt;6){image_index=11;}
        else
        {
            image_index = 0;
            idleTime = 0; animInterv = 6;
        }
        break;
        
    case 16:///Roar
        image_index = 0;
        idleTime = 0; animInterv = 6;
        break;
        
    default:
        image_index +=1;
        break;
}

scr_entity_animation_setFrame("default",image_index);
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>18,36</point>
    <point>22,22</point>
  </PhysicsShapePoints>
</object>
