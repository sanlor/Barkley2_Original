<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>s_jhodfrey01</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>InteractiveActor</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Create
event_inherited();
scr_event_hook_onCommon(event_cinema);

script = "";
event_user(0); // load dsl for Brain City
event_user(1); // load dsl for Tutorial

// Walking Animations
scr_entity_set_look_walk_mirror(s_jhodfrey01, s_cts_jhodfreyNE, s_cts_jhodfreySE);
scr_entity_look(id, SOUTHEAST); //Can only call this function after scr_entity_set_look
if scr_area_get() = "bct" then scr_entity_look(id, NORTHWEST);

// Tutorial Controls
// Tool tips from Jhodfrey
gossip = -999;
gosAct = 0;
gosTim = 2;
gosCou = 0;
if global.keyinput_type == KEYINPUT_GAMEPAD then
    {
    gosTxt[0] = "Use the HOLSTER BUTTON to draw your gun's.";
    gosTxt[1] = "Use the ACTION BUTTON to brast.";
    }
else
    {
    gosTxt[0] = "Press right-click to draw your gun's.";
    gosTxt[1] = "Press left-click to brast.";
    }

if room == r_fct_eggRooms01 and Quest("gameStart") != 1 then scr_event_interactive_deactivate();
else if room == r_fct_tutorialZone01 and Quest("tutorialProgress") &gt;= 5 then scr_event_interactive_deactivate();
else if room == r_fct_accessHall01 then
    {
    if Quest("tutorialProgress") &gt;= 7 then scr_event_interactive_deactivate();
    else
        {
script = "
DIALOG | Jhodfrey | Zane is waiting for you, /'Messiah/'.
";
        }
    }
    
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Gossip
event_inherited();
if (paused()) exit;

if (Quest("diaperHolster") == 0) exit;
if (gosAct)
{
    if (global.event)
    {
        if (instance_exists(gossip)) { Destroy(gossip); }
        exit;
    }
    gosCou = Goto(gosCou, 0, dt_sec());
    if (gosCou &lt;= 0)
    {
        gossip = instance_create(x, y, o_entity_indicatorGossip); // 45 DT life
        if (scr_player_getGunHolstered()) gossip.text = gosTxt[0];
        else gossip.text = gosTxt[1];
        gosCou += gosTim + (gossip.timer / 10);
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="12">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Destroy Variable in DSL Events
instance_destroy();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="11">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///DSL - Tutorial
/*
TODO: check for controller mapping
&lt;draw holster mapping&gt; = controlMethod3
&lt;controller or mouse&gt; = controlMethod4, either "the Control Stick", "the Mouse"
&lt;shoot mapping&gt; = controlMethod05
&lt;roll mapping&gt; = controlMethod06
*/

controlMethod03 = "RIGHT MOUSE BUTTON";
controlMethod05 = "LEFT MOUSE BUTTON";

script += "
SWITCH
DIALOG | Jhodfrey | I'm stuck here in this filthy power plant waiting for a diapered wonder to pull a switch while `kw`Commander Wiglaf`rt` is back at HQ devising the most ingenious military schemes... `w1`siiigh...`w0`
EXIT |

ROLL
DIALOG | Jhodfrey | You gonna_ `w1`roll`w0` or what?
EXIT |

SHOOT
DIALOG | Jhodfrey | My mission orders are to tell you that you can press `kw`" + string(controlMethod03) + "`rt` to take out your gun's and then press `kw`" + string(controlMethod05) + "`rt` to brast them. Click the right mouse button to toggle between adventure mode and gun's mode. I think it's called `kw`/'Adventure Mode/'`rt` and `kw`/'Brast Mode./'`rt` But who cares? Am I done now? Can we get out of this Klisp-forsaken Metal Dungeon?
EXIT |

DOUBT
DIALOG | Jhodfrey | You don't look so tough. All you do is gargle... I wonder if the boss was wrong about you... Maybe we got_ 'mq`the wrong youngster...`rt`
DIALOG | Mysteriouse Youngster = s_port_hoopzDiaper | `s1`Ughhhh...`s0`
";
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// DSL - Longinus Base
/*
wiglafMission = 1 - You've been assigned to kill Cuchulainn in order to meet Cyberdwarf.
wiglafMission = 2 - You've exited the rebel base through the hatch the Jhodfrey shows you.
wiglafMission = 3 - You've made it passed the Variable Segment and are now entering Cuchu's lair
wiglafMission = 4 - You've reported back to Wiglaf to complain and get full permission to meet Cyberdwarf.

jhodfreyState == 0 - have not talked
jhodfreyState == 1 - you've talked to Jhodfrey before talking to Wiglaf
jhodfreyState == 2 - you've accepted the mission and entered the Undersewers Hatch

jhodfreyMap == 1 - you need to get the Map to the AI Ruins
jhodfreyMap == 2 - You got the map, repeating dialog
//TODO: add in a time element so that Jhodfrey goes back to normal dialog after a while
*/
script = "
IF area == bct       | GOTO | AFTERTUTORIAL
IF zaneState &gt;= 7    | GOTO | AFTERTUTORIAL
IF jhodfreyTips == 3 | GOTO | DOUBT
IF jhodfreyTips == 2 | GOTO | SWITCH
IF jhodfreyTips == 1 | GOTO | SHOOT
IF jhodfreyTips == 0 | GOTO | ROLL

AFTERTUTORIAL
IF jhodfreyKeycard == 2 | GOTO | KEYCARDGIVEN
IF jhodfreyKeycard == 1 | GOTO | KEYCARDGIVE
IF wiglafMission == 5   | GOTO | POST_MISSION_SORT
IF wiglafMission == 4   | GOTO | WIGLAF_4
IF wiglafMission == 3   | GOTO | WIGLAF_2
IF wiglafMission == 2   | GOTO | WIGLAF_2
IF wiglafMission == 1   | GOTO | WIGLAF_1
IF wiglafMission == 0   | GOTO | WIGLAF_0

POST_MISSION_SORT
IF jhodfreyMap == 2     | GOTO | MAP_DONE
IF jhodfreyMap == 1     | GOTO | MAP_GIVE

MAP_DONE
DIALOG | Jhodfrey | Do you needs something to help close your gaping mouth, or are you going to actually `mq`follow the map I gave you?`rt`
DIALOG | P_NAME | Oh... uh_ right. Sorry.
DIALOG | Jhodfrey | Poppydick.
EXIT |

MAP_GIVE
QUEST  | jhodfreyMap = 2
DIALOG | P_NAME | Um, Commander Jhodfrey, sir?
DIALOG | Jhodfrey | What is it?
DIALOG | P_NAME | I was supposed to ask for a map of er-
DIALOG | Jhodfrey | First he has you peeling tubers and now you're spelunking the AI Ruins? Oh just because you can grow a full head of hair you now get the `w1`good missions?`w0` Well I say_ `w1`/'Poppydick./'`w0`
DIALOG | P_NAME = s_port_hoopzSurprise | Excusez-moi?!
WAIT   | 1
DIALOG | Jodfrey | Here take your damn map.
USEAT  | o_jhodfrey01
MAP    | gain | Route to the AI Ruins
NOTIFY | Gained the Route to the AI Ruins!
WAIT   | 0.5
DIALOG | P_NAME | Thank you, Jhodfrey.
DIALOG | Jhodfrey | Poppydick.
EXIT   |


KEYCARDGIVEN
DIALOG | Jhodfrey | Be careful out there..._ or not. I don't really care.

KEYCARDGIVE
DIALOG | Jhodfrey | What is it?
DIALOG | P_NAME   | Um, Cyberdwarf said I needed to get a um... `mq`keycard,`rt`_ or something, from you?
DIALOG | Jhodfrey | Well is it a keycard or is it something?
DIALOG | P_NAME = s_port_hoopzSad | Well, uh..._
DIALOG | Jhodfrey | Pfft, here.
USEAT  | o_jhodfrey01
NOTIFY | Got the Cuchukeycard
ITEM   | Cuchukeycard | 1
DIALOG | Jhodfrey | Keep it safe will you? It cost three dwarf lives to get this out of `sq`Floor One.`rt`
DIALOG | P_NAME   | Uh, thanks... I will.
QUEST  | jhodfreyKeycard = 2

WIGLAF_4
DIALOG | Jhodfrey | The Cyberdwarf doesn't just see anyone. What are you waiting for?

WIGLAF_2
DIALOG | Jhodfrey | Has the sortie been sorted?
DIALOG | P_NAME   | I'm working on it.
DIALOG | Jhodfrey | Figures, I'll detail this hesistation in my report to the Commander.

WIGLAF_1
DIALOG | Jhodfrey | Well if it isn't the new recruit.
DIALOG | P_NAME   | Private First Class P_NAME reporting for duty!
DIALOG | Jhodfrey | Pretty eager to prove yourself. Are you ready?
GOTO   | CUCHU_CHOICE

WIGLAF_0 // Does this state ever occur?
IF jhodfreyState == 0 | DIALOG | Jhodfrey | If you have anything you want to say to the commander, you'd better bring it up the chain of command. And that chain's biggest link is me.
IF jhodfreyState == 1 | DIALOG | Jhodfrey | I'm busy, and so is the Commander. Civilians shouldn't even be here anyways.
QUEST  | jhodfreyState | 1

CUCHU_CHOICE
CHOICE | Begin your first sortie?
REPLY  | CUCHU_START | I'm locked and loaded, Mission Start!
REPLY  | CUCHU_LATER | I'm still prepping my load-out.

CUCHU_LATER
DIALOG | P_NAME   | I'm gearing up, be back in a few minutes.
DIALOG | Jhodfrey | When the commander says jump, you ask /'How high?/'. You don't ask for another 5 minutes. Be quick about it.

CUCHU_START
QUEST  | jhodfreyState = 3
QUEST  | wiglafMission = 2
DIALOG | P_NAME   | I'm ready. Let me at this Cuchulainn.
DIALOG | Jhodfrey | You need to listen to me carefully, don't pretend this is anything other than your first real mission, Private. Anyone can peel tubers. This is the real deal.
DIALOG | P_NAME   | Oh... yes sir!
DIALOG | Jhodfrey | Very well, the Leftenant seems to think you have what it takes to earn a star. I guess that comes from his years of glorious dwarven service.
DIALOG | P_NAME   | I will try my best!
DIALOG | Jhodfrey | We'll soon see if it is good enough, Private. Now, you can access the `kw`Elevator`rt` either through `mq`The Undersewers`rt` or through `mq`The Swamps.`rt` 
DIALOG | Jhodfrey | I wouldn't recommend going there through the Swamps, but the choice is yours. If you decide to go through the Undersewers then just follow the `mq`trail of red markings`rt` we've left on the floors. 
DIALOG | Jhodfrey | You will reach an exit to the Swamps and eventually run into Variable. You'll know him when you see him.
DIALOG | P_NAME   | Okay got it.
WAIT   | 0.75
DIALOG | Jhodfrey | Oh, and Private.
WAIT   | 0.5
DIALOG | P_NAME   | Yes?
WAIT   | 1
DIALOG | Jhodfrey | You're not better than me.
DIALOG | P_NAME   | ...
";

// DIALOG | Jhodfrey | We'll soon see if it is good enough, Private. Now, you can access the `kw`Elevator`rt` through to `mq`Variable's Foward Operating Base.`rt` Just follow the `mq`trail of red markings`rt` we've left on the floor until you find Variable. You'll know him when you see him. Access is now granted.
/*
FOLLOWFRAME | CAMERA_FAST | o_cts_hoopz
MOVETO | o_cts_hoopz | o_cinema10 | MOVE_NORMAL
WAIT   | 0
LOOK   | o_jhodfrey01 | SOUTHWEST
LOOK   | o_cts_hoopz  | NORTH
SOUND  | sn_debug_one
EVENT  | o_manhole_cover | 1
WAIT   | 2
MOVETO | o_cts_hoopz | o_cinema11 | MOVE_NORMAL
WAIT   | 0
LOOK   | o_cts_hoopz | SOUTHEAST
WAIT   | 0.5
PLAYSET| o_cts_hoopz | kneelDown | kneel
WAIT   | 0
DIALOG | Jhodfrey | Oh, and Private.
WAIT   | 0.5
DIALOG | P_NAME   | Yes?
DIALOG | Jhodfrey | You're not better than me.
Misc   | alpha | o_cts_hoopz | 0 | 1
WAIT   | 1
SOUND  | sn_debug_one
EVENT  | o_manhole_cover | 0
WAIT   | 2
FADE   | 1 | 1
WAIT   | 1
Teleport | r_usw_ladderRebel01 | 240 | 128
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>17,54</point>
    <point>32,32</point>
  </PhysicsShapePoints>
</object>
