<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>s_mg_vrw_untamo_body</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>o_mg_vrw_object</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Create
// Randomize appearance //
index_head = irandom(7);
index_eyes = irandom(14);
index_hair = irandom(14);
index_mouth = irandom(14);
index_nose = irandom(14);
bodCol = make_color_hsv(random(255), 255, 255);
heaCol = make_color_hsv(random(255), 255, 255);
haiCol = make_color_hsv(random(255), 255, 255);

tlkOdd = 85;

usrNam = scr_vrw_username();
usrCol = make_color_hsv(random(255), 255, 255);

// Misc stuff //
AI_idle = 0.1;//irandom(5) + 1;
AI_walk = 0;
AI_talk = 0;
AI_love = 0;

lag_stutter = 0;
lag_stutter_check = irandom(20) + 50;

my_identity = 0;
image_speed = 0;
talk = 0;
talkSub = 0;
talkLifespan = 0;
loveSub = 0;
frame = 0;

// Movement related things //
speed_x = 0;
speed_y = 0;
speed_animation = 0;

// Just stay stuck randomly //
if irandom(100) &lt;= 5 then AI_idle = 0;

// Phasing //
if irandom(100) &lt;= 5 then phasing = true;
else phasing = false;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>// Pause //
if paused() exit;
if (instance_exists(o_mg_vrw_title)) exit;

// Idling //
if AI_idle &gt; 0 then
    {
    // Tick down //
    AI_idle -= dt_sec();
    
    // Stay still //
    speed_x = 0;
    speed_y = 0;
    speed_animation = 0;
    
    // Event //
    if AI_idle &lt;= 0 then
        {
        // Pick next AI via diceroll //
        var diceroll = irandom(100);
        if diceroll &gt;= 0 and diceroll &lt;= 7 then AI_love = irandom(2) + 2;
        else if diceroll &gt;= 8 and diceroll &lt;= 30 then AI_idle = irandom(1) + 1;
        else if diceroll &gt;= 31 and diceroll &lt;= tlkOdd then AI_walk = irandom(3) + 2;
        else if diceroll &gt; tlkOdd and diceroll &lt;= 100 then AI_talk = irandom(2) + 4;        
        }
    }  

// LOVE //
if (AI_love &gt; 0)
{
    AI_love -= dt_sec();
    if (AI_love &lt;= 0)
    {
        var diceroll = irandom(100);
        if diceroll &gt;= 0 and diceroll &lt;= 30 then AI_idle = irandom(1) + 1;
        else if diceroll &gt;= 31 and diceroll &lt;= tlkOdd then AI_walk = irandom(3) + 2;
        else if diceroll &gt; tlkOdd and diceroll &lt;= 100 then AI_talk = irandom(2) + 4;
    }
}

// Walking //
if AI_walk &gt; 0 then
    {
    // Tick down //
    AI_walk -= dt_sec();
    
    // Move //
    if (speed_x == 0) speed_x = random(3) * choose(1, -1);
    if (speed_y == 0) speed_y = random(1) * choose(1, -1);
    if speed_animation = 0 then speed_animation = random(2);
    
    // Event //
    if AI_walk &lt;= 0 then
        {
        // Stop //
        speed_x = 0;
        speed_y = 0;
        speed_animation = 0;
        
        // Pick next AI via diceroll //
        var diceroll = irandom(100);
        if diceroll &gt;= 0 and diceroll &lt;= 30 then AI_idle = irandom(2) + 1;
        else if diceroll &gt;= 31 and diceroll &lt;= tlkOdd then AI_walk = irandom(3) + 2;
        else if diceroll &gt; tlkOdd and diceroll &lt;= 100 then AI_talk = irandom(2) + 4;        
        }
    }  
    
// Talking //
if (AI_talk &gt; 0) // || talkLifespan &gt; 0) then
{
    // Tick down //
    //AI_talk -= dt();
    
    // Stay still //
    speed_x = 0;
    speed_y = 0;
    speed_animation = 0;
    
    // Create talk bubble //
    if (talk == 0) { talk = 1; talkLifespan = irandom(3) + 2; }
    
    talkLifespan -= dt_sec();
    
    // Event //
    if (talkLifespan &lt;= 0) then // AI_talk &lt;= 0 &amp;&amp; 
    {
        // Reset //
        talk = 0;
        talkLifespan = 0;
        AI_talk = 0;
        
        // Chat
        ds_list_insert(o_mg_vrw_town.chtCol, 0, usrCol);
        ds_list_insert(o_mg_vrw_town.chtMsg, 0, usrNam + "&gt; " + scr_vrw_message());
        
        // Pick next AI via diceroll //
        var diceroll = irandom(100);
        if diceroll &gt;= 0 and diceroll &lt;= 30 then AI_idle = irandom(2) + 1;
        else if diceroll &gt;= 31 then AI_walk = irandom(3) + 2;
    }
}  
    
// Lag stutter check //
if lag_stutter_check &gt; 0 then
    {
    // Tick down //
    lag_stutter_check -= dt();
    
    // Event //
    if lag_stutter_check &lt;= 0 then
        {
        // Diceroll and check if player starts to lag all of the sudden //
        var diceroll = irandom(100);
        if diceroll &gt;= 0 and diceroll &lt;= 5 then lag_stutter = irandom(100);
        }
    }
    
// Lag stutter //
if lag_stutter &gt; 0 then
    {
    // Tick down //
    lag_stutter -= dt();
    
    // Stutter //
    if irandom(100) &lt;= 25 then x = xprevious;
    if irandom(100) &lt;= 25 then y = yprevious;
    if irandom(100) &lt;= 25 then x += (random_range(1, 5) * choose(1, -1)) * (dt_sec() * 40);
    if irandom(100) &lt;= 25 then y += (random_range(1, 5) * choose(1, -1)) * (dt_sec() * 40);
    animation_speed = random(2);
    
    // Event //
    if lag_stutter &lt;= 0 then
        {
        // Disconnect? //
        if irandom(100) &lt;= 5 then 
            {
            //with o_mg_vrw_setup01 event_user(0);
            instance_destroy();
            }
        }
    }
    
// Move //
//speed_x *= dt_sec() * 100;
//speed_y *= dt_sec() * 100;
timSpd = dt_sec() * 40;
if place_free(x + speed_x, y) then x += speed_x * timSpd;
else speed_x = -speed_x * timSpd;
if place_free(x, y + speed_y) then y += speed_y * timSpd;
else speed_y = -speed_y * timSpd;
    
// Turn top/bottom //
if y &gt;= 224 then 
    {
    speed_y = -speed_y;
    y = 223; //-= 2;
    }
else if y &lt;= 160 then 
    {
    speed_y = +speed_y;
    y = 161; //+= 2;
    }
    
// Animation //
image_index += speed_animation * dt();

// Depth correction //
depth = -(y + 12);

// Direction //
if speed_x &gt; 0 then image_xscale = 1;
else if speed_x &lt; 0 then image_xscale = -1;

// Wrap //
if (x &lt; 0) x += room_width - 384;
if (x &gt; room_width - 384) then x -= room_width - 384;     

// Phasing //
if (phasing) then image_alpha = random(1);

// Collisions
global.tmpObj = id;
global.tmpX = x;
global.tmpY = y + 12;
with (o_mg_vrw_object) event_user(15);
x = global.tmpX;
y = global.tmpY - 12;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="25">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Collisions
if (global.tmpObj == id) exit;
dis = point_distance(x, y, global.tmpX, global.tmpY);
dir = point_direction(x, y, global.tmpX, global.tmpY);
if (dis &lt; 12)
{
    dis = abs(dis - 12);
    dir += -2 + random(4);
    global.tmpX += lengthdir_x(dis, dir);
    global.tmpY += lengthdir_y(dis, dir);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Draw
draw_sprite_ext(s_mg_vrw_untamo_shadow,0,dx,dy,image_xscale,image_yscale,0,c_white,image_alpha);
draw_sprite_ext(s_mg_vrw_untamo_body,image_index,dx,dy,image_xscale,image_yscale,0,bodCol,image_alpha);
draw_sprite_ext(s_mg_vrw_untamo_head,index_head,dx,dy,image_xscale,image_yscale,0,heaCol,image_alpha);
draw_sprite_ext(s_mg_vrw_untamo_mouth,index_mouth,dx,dy,image_xscale,image_yscale,0,heaCol,image_alpha);
draw_sprite_ext(s_mg_vrw_untamo_eyes,index_eyes,dx,dy,image_xscale,image_yscale,0,c_white,image_alpha);
draw_sprite_ext(s_mg_vrw_untamo_nose,index_nose,dx,dy,image_xscale,image_yscale,0,heaCol,image_alpha);
draw_sprite_ext(s_mg_vrw_untamo_hair,index_hair,dx,dy,image_xscale,image_yscale,0,haiCol,image_alpha);

if (talk)
{
    if (paused() == 0) talkSub += dt_sec() * 3;
    draw_sprite(s_mg_vrw_untamo_speak, talkSub, dx, dy - 8);
}

if (AI_love)
{
    if (paused() == 0) loveSub += dt_sec() * 3;
    draw_sprite(s_mg_vrw_untamo_heart, loveSub, dx, dy - 8);
}

if (0)
{
    draw_set_color(c_white);
    if (AI_idle &gt; 0) act = "idle"; else if (AI_walk &gt; 0) act = "walk"; else act = "talk";
    draw_set_halign(1);
    draw_text(dx, dy, act);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
