<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>s_placeholder</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>InteractiveActor</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited();

scr_event_hook_onCommon(event_cinema);

/* event_bct_raffael01
// o_raffael01
// event_bct_raffael01
    
Description:
    Raffael is the receptionist that greets you when you first enter the Guilderberg tower. 
    Their script should first be an autostart event.
    The player should run forwards and then be stopped by Raffael speaking to them.
   
    Raffael sits behind a desk, PREFERABLY somewhere where if they duck down they'd seem "unshootable."

Graphics &amp; Animations:
    Normal - sitting behind their desk, possibly with a phone cradled between shoulder and chin.
    Hiding - an animation that plays that makes them duck down under the desk. Happens when the player pulls out their gun.
    Cautious - if everybody in the tower is killed, perhaps you can talk to Raffael again. Just his head would be poking up behind his desk.

    (Interaction with Raffael could be switched, if Raffael is say, behind glass, to an intercom button on the wall. 
    This would remove the need to have Raffael's head or body clickable. 
    The player could press the intercom button and Raffael could answer from anywhere, even underneath his desk.)

Variables:
    raffaelAppt
        1 = Player claimed to be a solicitor, waiting
        2 = Player claimed to be a salesman. Mailroom access.
        3 = Player is meeting accountant Wentworth. 2F access.
        4 = Player is meeting HR Quatermaine. 3F access.
    
    raffaelCaught
        1 = Player's motive has been revealed, Raffael hides, and the duergars turn violent.
        2 = Same thing, now alternates between 1 and 2 for different dialogues.
        
    raffaelSolicit
        1 = Solicitation counter just started (req. "raffaelAppt" == 1)
        2 = Solicitation counter a bit underway.
        3 = Solicitation counter ended.
        4 = Solicitation counter ended, talked again.
        
    officeDirectory
        1 = Player has read the Office Directory. Gives more options in dialogue with Raffael.
        
Operation:
    Player is asked what they are doing by Raffael.
    If they have checked the Office Directory, they can choose the name of anyone in the building.
    Otherwise, they can only choose "Delivery", "Salesman", or "Fight"
    Choosing "Davenport", "Mayhew", "Pembroke", "Pomeroy", or "Fight" turns the tower into a combat zone.
    Choosing "Delivery" gives the player the B1 Visitor Badge.
    Choosing "Wentworth" gives the player the 2F Visitor Badge.
    Choosing "Davenport" gives the player the 3F Visitor Badge.
    Choosing "Salesman" starts timer. After X amount of time, Raffael says NO SOLICITING.
    Progression after "Salesman" requires violence, either by threatening Raffael or the duergar on this floor, Melqart.
*/


/*if (argument0 == SCRIPT_START) {  
    /*
    var floor_choice = ds_list_create();
    floor_choice[| 0] = "Wentworth";
    floor_choice[| 1] = "Mayhew";
    floor_choice[| 2] = "Pomeroy";
    floor_choice[| 3] = "Pembroke";
    floor_choice[| 4] = "Quatermaine";
    floor_choice[| 5] = "Davenport";
    ds_list_shuffle(floor_choice);
    */
/*}
else if (argument0 == SCRIPT_STEP)
{
    //if (scr_quest_get_state("raffaelAppt") == 1) &amp;&amp; (scr_quest_get_state("raffaelSolicit") == 0) {
    //    solicitation timer script;
    //}
}
else if (argument0 == SCRIPT_INTERACT)
{
    var raffael = id;
    
    var event = scr_event_create_main();
    var appt_snippet = scr_event_create_child(event);
    var who_snippet = scr_event_create_child(event);
    var caught_snippet = scr_event_create_child(event);
    var soliciting_snippet = scr_event_create_child(event);
    //var delivery_snippet = scr_event_create_child(event);
    //var post_battle_snippet = scr_event_create_child(event);
    //var post_guilder_snippet = scr_event_create_child(event);

    var r_port = NULL;
    
    //----------------------------------------------------------
    // main event
    //----------------------------------------------------------
    with (event)
    {
        // player has been caught
        if (scr_quest_get_state("raffaelCaught") &gt;= 1) 
        {
            // alternates between the general line and the specific line
            if (scr_quest_get_state("raffaelCaught") == 1)
            {
                scr_event_build_dialogue("Raffael", r_port, "P-please! Please don't kill me!");
                scr_event_build_quest_state_add("raffaelCaught", 1);
            }
            else 
            {
                switch (scr_quest_get_state("raffaelAppt"))
                {
                    case 1:
                        scr_event_build_dialogue("Raffael", r_port, "What... what kind of solicitor are you?");
                        break;
                    case 2:
                        scr_event_build_dialogue("Raffael", r_port, "What... what kind of salesman are you?");
                        break;
                    case 3:
                        scr_event_build_dialogue("Raffael", r_port, "Is... is this what we get for tax-evasion?");
                        break;
                    case 4:
                        scr_event_build_dialogue("Raffael", r_port, "Please... please Quatermaine, don't hire this kid...");
                        break;
                }
                scr_event_build_quest_state_add("raffaelCaught", -1);
            }
        }
        // already talked
        else if (scr_quest_get_state("raffaelAppt") != 0) 
        {
            // solicitation, lobby, 1f
            if (scr_quest_get_state("raffaelAppt") == 1)
            {
                // solicitation counter just started
                if (scr_quest_get_state("raffaelSolicit") == 1) 
                {
                    scr_event_build_dialogue("Raffael", r_port, "Just have a seat, someone will be with you shortly.");
                    scr_event_build_event_snippet(soliciting_snippet);
                }
                // solicitation counter a bit underway
                else if (scr_quest_get_state("raffaelSolicit") == 2)
                {
                    scr_event_build_dialogue(P_NAME, s_port_hoopz, "Hey, I've been waiting for awhile... any news?");
                    scr_event_build_dialogue("Raffael", r_port, "I'll let you know.");
                    scr_event_build_event_snippet(soliciting_snippet);
                }
                // solicitation counter ended
                else if (scr_quest_get_state("raffaelSolicit") == 3)
                {
                    scr_event_build_dialogue(P_NAME, s_port_hoopz, "Oh cool, someone's ready to see me?");
                    scr_event_build_dialogue("Raffael", r_port, "Well, in fact, I made a few calls to the folks upstairs and they said... /'No Soliciting/'.");
                    scr_event_build_dialogue(P_NAME, s_port_hoopz, "What? That's all? I was waiting here forever! Come on, man!");
                    scr_event_build_dialogue("Raffael", r_port, "No soliciting.");
                    scr_event_build_dialogue(P_NAME, s_port_hoopz, "I just wan-");
                    scr_event_build_dialogue("Raffael", r_port, "No soliciting.");
                    scr_event_build_dialogue(P_NAME, s_port_hoopz, "... bu-");
                    scr_event_build_dialogue("Raffael", r_port, "No soliciting!!!");
                    scr_event_build_event_snippet(soliciting_snippet);
                }
                // solicitation counter ended, talked again
                else {
                    scr_event_build_dialogue("Raffael", r_port, "Don't you get it! No soliciting! No solicitors! No solicitation! The word /'solicit/' should not cross your mind while on these premises! How many ways do I have to say it!?");
                    scr_event_build_event_snippet(soliciting_snippet);
                }
            }
            // delivery, mailroom, b1
            else if (scr_quest_get_state("raffaelAppt") == 2)
            {
                scr_event_build_dialogue("Raffael", r_port, "You can bring your delivery to the mailroom, which is just one floor beneath us. There's someone down there, um... her name is... oh forget it, I have no idea. Anyway, she'll take care of you. Whoever she is.");
            }
            // wentworth, 2f
            else if (scr_quest_get_state("raffaelAppt") == 3)
            {
                scr_event_build_dialogue("Raffael", r_port, "Ms. Wentworth is on floor 2F, which is one floor above where we are now.");
            }
            // Quatermaine, 3f
            else if (scr_quest_get_state("raffaelAppt") == 4)
            {
                scr_event_build_dialogue("Raffael", r_port, "Mr. Quatermaine is on floor 3F, which is two floors above where we are now.");
            }
        }
        // first dialogue
        else 
        {
            scr_event_build_event_snippet(appt_snippet);
        }
    }
    
    //----------------------------------------------------------
    // appt_snippet
    //----------------------------------------------------------
    with (appt_snippet)
    {
        scr_event_build_dialogue("Raffael", r_port, "Welcome to ----- Megacorp Towers... wait, now how did you get in? I thought this place was locked down because of the protests. Do you have an appointment?");
        
        // appt_choice
        var appt_choice = scr_event_build_choice("Have an appointment?", s_port_hoopz);
        
        // choice1: no appointment, fight
        with (scr_event_build_add_choice(appt_choice, "Heck no!"))
        {
            scr_event_build_dialogue(P_NAME, s_port_hoopz, "Heck no, I don't have an appointment! I don't wait on anyone!");
            scr_event_build_event_snippet(caught_snippet);
        }
        // choice2: claim to have an appointment
        with (scr_event_build_add_choice(appt_choice, "That's right."))
        {
            scr_event_build_dialogue(P_NAME, s_port_hoopz, "That's right. I've got an appointment. I'm... I'm here for a meeting.");
            scr_event_build_dialogue("Raffael", r_port, "I didn't know there were any meetings scheduled for today... then again, they never tell me! Who do they think runs this place? It's probably because of that protest. It's been making things so difficult around here! We had to hire these duergar guards, who uh... they pretty much loathe us! You can feel it in the air almost. Oh yeah, who did you say your appointment was with?");
            if (scr_quest_get_state("officeDirectory") == 1) 
            {
                scr_event_build_dialogue(P_NAME, s_port_hoopz, "Oh yeah, it's with uh...");
            }
            else 
            {
                scr_event_build_dialogue(P_NAME, s_port_hoopz, "Who... I'm seeing uh... ummmm...");
                scr_event_build_dialogue("Raffael", r_port, "Yeah? Who? Spit it out already!");
            }
            scr_event_build_event_snippet(who_snippet);
        }
    }
    
    //----------------------------------------------------------
    // who_snippet
    //----------------------------------------------------------
    with (who_snippet)
    {
        var who_choice = scr_event_build_choice("Who are you seeing?", s_port_hoopz);
        
        // person choices
        if (scr_quest_get_state("officeDirectory") == 1)
        {
            with (scr_event_build_add_choice(who_choice, "Ms. Davenport."))
            {
                scr_event_build_dialogue(P_NAME, s_port_hoopz, "I'm here to see Ms. Davenport.");
                scr_event_build_dialogue("Raffael", r_port, "Hmm... let's see... I'm looking at the schedule and I don't see anything for Ms. Davenport.");
                scr_event_build_dialogue(P_NAME, s_port_hoopz, "Oh... um... that was a mistake, I uh...");
                // go to caught_snippet
                scr_event_build_event_snippet(caught_snippet);
            }
            with (scr_event_build_add_choice(who_choice, "Mr. Quatermaine."))
            {
                scr_event_build_dialogue(P_NAME, s_port_hoopz, "I'm here to see Mr. Quatermaine.");
                scr_event_build_dialogue("Raffael", r_port, "Oh, you're looking for a job then? Why, that's so inspiring! It is heartwarming to see a poor youngster try to better themselves. This is the place too... but there's no way we're hiring in this climate! Oh... oh I'm sorry, I shouldn't have said that. I tell you what, take this visitor's badge. It'll let you get to Mr. Quatermaine's office on Floor 3F.");
                // get visitor's badge 3F
                Item("build", "gain", "3F Visitor Badge", 1);
                scr_event_build_dialogue_item("Got 3F Visitor Badge.");
                // officeAppointment = 4, Quatermaine
                scr_event_build_quest_state("raffaelAppt", 4);
            }
            with (scr_event_build_add_choice(who_choice, "Mr. Mayhew."))
            {
                scr_event_build_dialogue(P_NAME, s_port_hoopz, "I'm here to see Mr. Mayhew.");
                scr_event_build_dialogue("Raffael", r_port, "Hmm... let's see... I'm looking at the schedule and I don't see anything for Mr. Mayhew.");
                scr_event_build_dialogue(P_NAME, s_port_hoopz, "Oh... um... that was a mistake, I uh...");
                // go to caught_snippet
                scr_event_build_event_snippet(caught_snippet);
            }
            with (scr_event_build_add_choice(who_choice, "Ms. Wentworth."))
            {
                scr_event_build_dialogue(P_NAME, s_port_hoopz, "I'm here to see Ms. Wentworth.");
                scr_event_build_dialogue("Raffael", r_port, "Oh, you're the auditor? I guess I knew about that one. Slipped my mind! Ms. Wentworth has been expecting you. I trust you'll find that everything here is in order. If you'll just take this visitor's badge, the guards will give you access to Ms. Wentworth's office on Floor 2F.");
                // get visitor's badge 2F
                Item("build", "gain", "2F Visitor Badge", 1);
                scr_event_build_dialogue_item("Got 2F Visitor Badge.");
                // officeAppointment = 3, wentworth
                scr_event_build_quest_state("raffaelAppt", 3); 
            }
            with (scr_event_build_add_choice(who_choice, "Mr. Pembroke."))
            {
                scr_event_build_dialogue(P_NAME, s_port_hoopz, "I'm here to see Mr. Pembroke.");
                scr_event_build_dialogue("Raffael", r_port, "Hmm... let's see... I'm looking at the schedule and I don't see anything for Mr. Pembroke.");
                scr_event_build_dialogue(P_NAME, s_port_hoopz, "Oh... um... that was a mistake, I uh...");
                scr_event_build_event_snippet(caught_snippet);
            }
            with (scr_event_build_add_choice(who_choice, "Ms. Pomeroy."))
            {
                scr_event_build_dialogue(P_NAME, s_port_hoopz, "I'm here to see Ms. Pomeroy.");
                scr_event_build_dialogue("Raffael", r_port, "Hmm... let's see... I'm looking at the schedule and I don't see anything for Mr. Pomeroy.");
                scr_event_build_dialogue(P_NAME, s_port_hoopz, "Oh... um... that was a mistake, I uh...");
                // go to caught_snippet
                scr_event_build_event_snippet(caught_snippet);
            }
        }
        
        // default choices
        
        // delivery
        with (scr_event_build_add_choice(who_choice, "Don't know... I've just got a delivery."))
        {
            scr_event_build_dialogue(P_NAME, s_port_hoopz, "I'm not sure... I've got a delivery. You know who I should see about that?");
            scr_event_build_dialogue("Raffael", r_port, "A delivery, hm? Go ahead and take it down to the mailroom, I'm sure our sla-... ahem, our unpaid intern can take care of it for you. Here, take this visitor's badge. It will give you access to the mailroom on Floor B1. Just head to the ladderwell on the left.");
            // get visitor's badge B1
            Item("build", "gain", "B1 Visitor Badge", 1);
            scr_event_build_dialogue_item("Got B1 Visitor Badge.");
            // officeAppointment = 2, mailroom
            scr_event_build_quest_state("raffaelAppt", 2);
        }
        // salesman
        with (scr_event_build_add_choice(who_choice, "Don't know... I'm just a salesman."))
        {
            scr_event_build_dialogue(P_NAME, s_port_hoopz, "I'm not sure... I'm a salesperson. I know it's sudden to just drop in, but I'd really appreciate it if I could have just a little bit of time with whoever's in charge of purchasing. I've got some really exciting offers.");
            scr_event_build_dialogue("Raffael", r_port, "A solicitor, hm? Just have a seat there in the lobby. I'll let you know when someone is ready to see you.");
            // officeAppointment = 1, soliciting
            scr_event_build_dialogue_debug("bort", NULL, "solicitation timer should now start.")
            scr_event_build_quest_state("raffaelAppt", 1);
        }
        // be violent!!!!!
        with (scr_event_build_add_choice(who_choice, "Who am I kidding... I'm here to brast!"))
        {
            scr_event_build_dialogue(P_NAME, s_port_hoopz, "Who am I kidding... I'm here to brast!");
            scr_event_build_dialogue("Raffael", r_port, "B... brast? Brast!?... SECURITYYYYYYYY!!!!");
            scr_event_build_dialogue_debug("bort", NULL, "Raffael does a hiding animation, and is now behind his desk, unclickable.");
            scr_event_build_dialogue_debug("bort", NULL, "Pacify mode disabled.");
            scr_event_build_dialogue_debug("bort", NULL, "Duergar Melqart should turn into a combat actor.");
            scr_event_build_dialogue_debug("bort", NULL, "Combat tunes should start up.");
            //scr_event_build_animation_play_and_set(o_raffael01, hide, hiding);
            scr_event_build_pacify(false);
            //scr_event_build_music();
            scr_event_build_quest_state("raffaelCaught", 1);
        }
    }

    //----------------------------------------------------------
    // caught_snippet
    //----------------------------------------------------------
    with (caught_snippet)
    {
        // default
        if (scr_quest_get_state("raffaelSolicit") == 0)
        {
            scr_event_build_dialogue("Raffael", r_port, "If you don't have an appointment then what are you... wait... is... is that a gun? Are... are those ALL gun's!? SECURITYYYYYYYY!!!!");
        }
        // from soliciting_snippet
        else {
            scr_event_build_dialogue("Raffael", r_port, "L... lead? Lead!? SECURITYYYYYYYY!!!!");
        }
        scr_event_build_dialogue_debug("bort", NULL, "Raffael does a hiding animation, and is now behind his desk, unclickable.");
        scr_event_build_dialogue_debug("bort", NULL, "Pacify mode disabled.");
        scr_event_build_dialogue_debug("bort", NULL, "Duergar Melqart should turn into a combat actor.");
        scr_event_build_dialogue_debug("bort", NULL, "Combat tunes should start up.");
        //scr_event_build_animation_play_and_set(o_raffael01, hide, hiding);
        scr_event_build_pacify(false);
        //scr_event_build_music();
        scr_event_build_quest_state("raffaelCaught", 1);
    }
    
    
    //----------------------------------------------------------
    // soliciting_snippet
    //----------------------------------------------------------
    with (soliciting_snippet)
    {
        if (scr_quest_get_state("raffaelSolicit") &gt;= 3) {
            scr_event_build_dialogue(P_NAME, s_port_hoopz, "Urrrrghghghgh!");
        }
        else {
            scr_event_build_dialogue(P_NAME, s_port_hoopz, "(Waiting around is getting so old!)")
        }
        var soliciting_choice = scr_event_build_choice("Wage war?", s_port_hoopz);
        
        // fight
        with (scr_event_build_add_choice(soliciting_choice, "Wage it! Brast all in sight."))
        {
            scr_event_build_dialogue("Raffael", r_port, "I'm not here to solicit! I'm here to brast! Eat lead, corporate swine!");
            scr_event_build_event_snippet(caught_snippet);
        }
        // wait
        with (scr_event_build_add_choice(soliciting_choice, "Refrain from waging."))
        {
            if (scr_quest_get_state("raffaelSolicit") == 3) 
            {
                scr_event_build_quest_state("raffaelSolicit", 4);
                scr_event_build_dialogue(P_NAME, s_port_hoopz, "(Just calm down, " + P_NAME + "... he's won this round...)");
            }
            else {
                scr_event_build_dialogue(P_NAME, s_port_hoopz, "(Just calm down, " + P_NAME + "... good things come to those who wait...)");
            }
        }
    }
    
    scr_event_advance(event);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>scr_NPCDebugPlaceholder();
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>16,32</point>
    <point>16,16</point>
  </PhysicsShapePoints>
</object>
