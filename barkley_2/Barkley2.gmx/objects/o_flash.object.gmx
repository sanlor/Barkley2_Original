<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>s_Flash</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>1</depth>
  <persistent>0</persistent>
  <parentName>Particle</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited();

scr_entity_animation_setSpeed("default", 3);
fusedGun = -1; // Error prevention
fused = 0;
dad = -1;
rem = 1;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (instance_exists(o_hoopz) == 0 || rem == 0) exit;
if (fused &gt; 0)
{
    if (scr_player_equip("object") != fusedGun) exit;
    actor = o_hoopz;
    var _aimdirQuant = actor.aiming * (360 / actor.aFaceCount);
    scr_player_getGunShifts(fusedType,false);
    var dir = actor.aiming*22.5 
    var distx = lengthdir_x(heldDist,dir);
    var disty = lengthdir_y(heldDist,dir)*0.75;
    var xhshift = lengthdir_x(heldHShift,dir+90);
    var yhshift = lengthdir_y(heldHShift,dir+90)*0.75;
    
    var _barrel_x = lengthdir_x(heldBulletDist,_aimdirQuant) + distx/5 + xhshift + actor.x;
    var _barrel_y = lengthdir_y(heldBulletDist,_aimdirQuant) + disty/5 + yhshift + actor.y;

    if (fusedType==GUN_TYPE_MUSKET)
    {
        _barrel_x = lengthdir_x(heldBulletDist,_aimdirQuant) - distx*0.7 + xhshift + actor.x;
        _barrel_y = lengthdir_y(heldBulletDist,_aimdirQuant) - disty*0.7 + yhshift + actor.y;
        //audio_play_sound_on_actor(actor, "musket_fuse", 0, 0);
    }
    //else if (gun[? "pType"]==GUN_TYPE_FLINTLOCK) audio_play_sound_on_actor(actor, "flintlock_fuse", 0, 0);
    var current = scr_statusEffect_getFromCombatActor(actor.id, statusEffect_wading);
    var swimmove = 0;
    if(current &gt;0)
    {
        swimmove = ds_map_find_value(current, "wadingDepthCurrent");
    }
    
    var _barrel_z = actor.ARMS_HEIGHT+heldBullet_YShift+2 - swimmove;
    _flash = instance_create(_barrel_x, _barrel_y - (_barrel_z+4), o_flash)
    _flash.sprite_index = s_GunSpark;
    _flash.dny = -64;
    _flash.image_angle = 0;
    _flash.fused = 1;
    _flash.fusedType = fusedType;
    _flash.fusedGun = fusedGun;
    _flash.dad = dad;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="7">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>instance_destroy()
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited();

if (sprite_exists(sprite_index)) {
    draw_sprite_ext(sprite_index, scr_entity_animation_getImage("default"), dx, dy, image_xscale, image_yscale, image_angle, image_blend, image_alpha);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>34,34</point>
    <point>34,34</point>
  </PhysicsShapePoints>
</object>
