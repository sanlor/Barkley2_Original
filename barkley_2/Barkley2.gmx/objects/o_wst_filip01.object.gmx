<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>o_filip01</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>InteractiveActor</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>// Inheritance //
event_inherited();

// Cinema //
scr_event_hook_onCommon(event_cinema);

// NPC script for Filip, the train ticket seller. He is a con artist and is selling train tickets to a train that doesn't exist. The player can keep buying a new ticket from him during every new time period. The script SHOULD check to see if the player already purchased a train ticket and if a new time has been reached, at which point Filip takes your ticket and gives you the option to buy a new one. Also I decided to give brief flavor dialogue where the player asks Filip questions about the train depending on the time. This makes the script a bit more complicated but the NPC felt really empty without something like that. Considering Filip's ticket check is already on the complicated side, I figured I'd flesh it out more. I also did this because I couldn't figure out a way to make Filip check your ticket only AFTER time has progressed so I tried to get clever with states and shit.
// NOTE: This script is hinged on the object "Train Ticket" that Filip will sell to you. When a new time has reached Filip will take your train ticket from you automatically and attempt to sell you a new one. The game will probably explode if there is no train ticket item in the game or if we change the name of that item!!!!
// NOTE: This script is semi-related to the Grieg script in that you can take the ticket and sell it to Grieg for a net loss. I thought about reflecting that in this script somehow, but I already made this script senselessly complicated and didn't find it necessary to make matters worse.
      
// Bail out after you give ticket to Grieg //
if Quest("wstGrieg") == 2 then scr_event_interactive_deactivate();

// IF @Train Ticket@ &gt;= 1 | 
script = " 
IF wstFilip == 5 | GOTO | FILIP_5
IF wstFilip == 6 | GOTO | FILIP_6
IF wstFilipPurchase == 1 | GOTO | PURCHASE_CONTINUE
IF wstFilipMissed == 1 | GOTO | MISSED_TRAIN
IF wstFilip == 0 | GOTO | FILIP_0
IF wstFilip == 1 | GOTO | FILIP_1
IF wstFilip == 2 | GOTO | FILIP_2
IF wstFilip == 3 | GOTO | FILIP_3
IF wstFilip == 4 | GOTO | FILIP_4
    
PURCHASE_CONTINUE
DIALOG | Filip | Ah, you're back. So you want a `kw`train ticket`rt` after all, eh?
GOTO   | PURCHASE
   
FILIP_0        
DIALOG | Filip | Train tickets here!! Only place in The Social to buy `kw`train tickets!!!`rt` Only @money_filipTicket@ neo-shekels!! You there, want to buy a train ticket? Better act now, they're going fast. Only way you're ever going to get out of The Social!
GOTO   | PURCHASE

FILIP_1
DIALOG | Filip | Oh, excuse me. I was just `kw`daydreaming`rt` about all the wonderful places you can visit on a train.

FILIP_2
DIALOG | Filip | You certainly are lucky. I always say that a man with a train ticket in his hand is a man with good fortune.
 
FILIP_3
DIALOG | Filip | What are you still doing here!?! You need to `s1`hurry,`s0` the train leaves any minute now!!
  
FILIP_4
DIALOG | Filip | Quite a bargain you got on that train ticket. Tell all your friends about me, I'm the only place you can get train tickets right now.

FILIP_5
DIALOG | Filip | Come on, your anti-train smirks are scaring off the customers. Get lost.
QUEST  | wstFilip = 6
    
FILIP_6
DIALOG | Filip | I just want to jizz on a cybergremlin's face before I die._ That's all I want.

MISSED_TRAIN
DIALOG | Filip  | My goodness! What are you still doing here? `s1`You missed the train!`s0`
DIALOG | P_NAME | I did? Shucks, I couldn't find it.
DIALOG | Filip  | That's terrible. Your ticket's `kw`expired`rt` too. Here, let me take your old ticket. It's just no good anymore.
NOTIFY | Filip snatched your expired ticket!
ITEM   | Train Ticket | -1
DIALOG | Filip  | It's all sweaty. You should put it in your pocket next time. You don't want all the ink to smear. So, let's get you a new ticket. That'll be another @money_filipTicket@ neo-shekels.
GOTO   | PURCHASE              
  
PURCHASE
BREAKOUT | add | money
CHOICE | Want to buy a train ticket for $@money_filipTicket@?
IF money &lt; @money_filipTicket@  | REPLY | CHOICE_YES_POOR | Yes!
IF money &gt;= @money_filipTicket@ | REPLY | CHOICE_YES_RICH | Yes!
REPLY | CHOICE_NO_THANKS | Nope!

CHOICE_YES_POOR
DIALOG | P_NAME | I don't have that much money.....
BREAKOUT | clear
DIALOG | Filip  | Oh no!! I guess you're just stuck here, then. The train is the only way out of The Social. You better save up enough money or you're never getting out of here.
QUEST  | wstFilipPurchase = 1
QUEST  | wstFilipMissed = 0
       
CHOICE_YES_RICH
DIALOG | P_NAME | I'll definitely take one!
QUEST  | money -= @money_filipTicket@
NOTIFY | Purchased a Train Ticket!
ITEM   | Train Ticket | 1
DIALOG | Filip | `w1`Wonderful!!`w0` Here's your ticket!! Have a safe and pleasant journey!!!
BREAKOUT | clear
QUEST  | wstFilipPurchase = 0
QUEST  | wstFilipMissed = 0
IF wstFilip &lt; 5 | ClockTime | event | wstFilipMissed | 1 | 30
GOTO   | POSTPURCHASE
                    
CHOICE_NO_THANKS
DIALOG | P_NAME | No thanks. Maybe some other time.
BREAKOUT | clear
DIALOG | Filip  | This isn't the sort of place for a little youngster like you to be running around. You should really take the train right now!
QUEST  | wstFilipPurchase = 1
QUEST  | wstFilipMissed = 0

POSTPURCHASE
IF wstFilip == 4 | GOTO | POSTPURCHASE_4
IF wstFilip == 3 | GOTO | POSTPURCHASE_3
IF wstFilip == 2 | GOTO | POSTPURCHASE_2
IF wstFilip == 1 | GOTO | POSTPURCHASE_1
IF wstFilip == 0 | GOTO | POSTPURCHASE_0

POSTPURCHASE_0
DIALOG | P_NAME | So where does the train go?
DIALOG | Filip  | Anywhere you'd want it to go. It's that kind of train, the best there is. I myself like to rest somewhere in the shade and have a little daydream about the places I want to go. Then I go there. It's like I'm following my own dreams, they do all the talking for me.
DIALOG | P_NAME | Uh, ok. I just want to get as far away from here as I can.
DIALOG | Filip  | Well, it's a good thing you found me, then. Better run along now, don't want to miss that train.
QUEST  | wstFilip = 1

POSTPURCHASE_1
DIALOG | P_NAME | So, where is the train station?
DIALOG | Filip  | It's where I get all my tickets from. You'll find it, it's right over there.
DIALOG | P_NAME | Ok, thanks.
QUEST  | wstFilip = 2
         
POSTPURCHASE_2
DIALOG | P_NAME | Are there any of those duergar guys on the train? I don't like them very much.
DIALOG | Filip  | No. Trains are a no-duergar zone. This is me fighting back against the duergar system. Imagine a poor mother, not unlike yourself, running from land mines holding her baby crying in a dark alley. This is the image that inspires me to sell train tickets. I will sell train tickets until I die.
DIALOG | P_NAME | Ok, thanks, that's all I wanted to know.
DIALOG | Filip  | Just remember to hurry and find the train station or the train will leave without you! That ticket is only good for this train. You miss it and you'll have to buy another from me.
QUEST  | wstFilip = 3

POSTPURCHASE_3
DIALOG | P_NAME | These prices are kinda high for a train ticket. Why is it so expensive?
DIALOG | Filip  | Oh? I suppose you know of a cheaper train in town, then? Come, show me this cheaper train ticket. I'll sell them instead.
DIALOG | P_NAME | I don't know of a cheaper train. It's just expensive, that's all.
DIALOG | Filip  | That's why it's expensive, there's no other trains. You're lucky they're this cheap. Now, hurry on. You don't want to miss the train.
QUEST  | wstFilip = 4

POSTPURCHASE_4
DIALOG | P_NAME | Why aren't more people taking the train out of town? I don't think many people really like it here.
DIALOG | Filip  | I don't know. Maybe they can't afford it. Tickets aren't cheap. Maybe they're afraid to leave, afraid it's no better anywhere else. Maybe some people just love their land, no matter how polluted it gets. They're like a train, can't go anywhere but where their rails take it.......
DIALOG | P_NAME | You'd think if their life was really like a train it would take them to the train station.
DIALOG | Filip  | Fruck you, what the fruck do you know about trains? 70% of my body is made of trains. You're just a train amateur. Now scram, I don't need your stupid amateur train commentary.
QUEST  | wstFilip = 5
";
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>14,41</point>
    <point>25,25</point>
  </PhysicsShapePoints>
</object>
