<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>s_jeanmarc01</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>oDuergar</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Create
name = "jeanmarc";
// If you are not blueface, auto aggro for hoopz
if (Quest("playerBlueFace") == 0) visible = 0;
// If you aggro'd as Hoopz and are blueface, don't allow aggro
if (Quest("playerBlueFace") == 1) solid = 1;
// Cannot be aggro / patrol in pit room
if (room == r_min_jeanmarcPit01) solid = 1;
event_inherited();
if (guplur) exit;

timer_sleep = 0;

/*
    jeanmarcState
    0 - Nothing has occurred
    1 - Agreed to fill in for Jean-Marc
    2 - Decline the fill in
    3 - Jean-Marc is at the bottom of the pit
    4 - Bluff success
    5 - Bluff failure
*/

// Dead //
if (room == r_min_jeanmarcPit01 &amp;&amp; Quest("jeanmarcState") == 1) save = 1;
else save = 0;
if (Quest("playerBlueFace") == 0 &amp;&amp; save == 0)
{
    instance_destroy();
    exit;
}

// Alpha Camp //
if room = r_min_baseCampAlpha01 then
{
// Garbag //
scr_event_hook_onCommon(event_cinema);

// Deactivate in alpha camp if he has gone to the minecart room //
if Quest("jeanmarcState") == 1 then scr_event_interactive_deactivate();    

script = "
IF jeanmarcState == 0 | GOTO | FIRST_MEETING
IF jeanmarcState == 2 | GOTO | DECLINED_BEFORE

FIRST_MEETING
DIALOG | P_NAME    | Season's Greeting's! I'm P_NAME!
DIALOG | Jean-Marc | What?
DIALOG | P_NAME    | I am a Duergar called P_NAME. I am here to serve our lord and saviour and master, Cuchulainn.
DIALOG | Jean-Marc | Oh.
WAIT   | 0.75
DIALOG | Jean-Marc | Alright, P_NAME. I don't know who the frudge you are or what the hell you are doing down here, but `kw`your face is blue,`rt` so I guess it's all good.
DIALOG | P_NAME    | Yes, I am an authentic Duergar.
DIALOG | Jean-Marc | So what exactly is your assignment?
DIALOG | P_NAME    | Oh, I'm... I don't know.
DIALOG | Jean-Marc | What?
WAIT   | 0.75
DIALOG | Jean-Marc | Clispaeth Christ... Okay I guess you are good enough for some guard duty. Listen, I gotta go and,_ uh,_ do some paperwork and I need you to fill in for me. Stay here and make sure these big nosed shitheads don't cause any trouble. 
DIALOG | Jean-Marc | If they start singing, give 'em a punch to the gut. If they start dancing, give 'em a punch to the gut. If you start to get bored, go right ahead and give those dwarfs a punch to the gut. But only a light punch. Something that'll leave a bruise but won't maim them. We need them as functioning workforce.
CHOICE | Fill in for Jean-Marc?
REPLY  | FILL_IN   | Jawohl!
REPLY  | FILL_OUT  | Nein!

FILL_IN
DIALOG | P_NAME    | Jawohl!
DIALOG | Jean-Marc | Okay, good. I've got a lot of paperwork so this might take a few hours. Whatever you do, don't come to see me. I am not to be disturbed. 
MOVETO | o_jeanmarc01 | o_cinema0 | MOVE_NORMAL
WAIT   | 0
QUEST  | jeanmarcState = 1
Destroy | o_jeanmarc01

FILL_OUT
DIALOG | P_NAME    | Nein!
DIALOG | Jean-Marc | Oh what the fuck? Why are you down here if you aren't going to do anything? 
DIALOG | P_NAME    | Umm...
DIALOG | Jean-Marc | Are you on chups or something?
DIALOG | P_NAME    | I would like to say no...?
DIALOG | Jean-Marc | I don't have the time for this. Get the fuck out of my sight.
DIALOG | P_NAME    | Okay...
QUEST  | jeanmarcState = 2

DECLINED_BEFORE
DIALOG | Jean-Marc | You don't belong down here. Get the fuck out.
CHOICE | Your response?
REPLY  | FILL_IN_2  | I can fill in for you!
REPLY  | FILL_OUT_2 | I need to leave...

FILL_IN_2
DIALOG | P_NAME    | I can fill in for you...
DIALOG | Jean-Marc | `w1`Pfft...`w0` You seem like you are out of your flipping gourd, but... Alright. Stay here and make sure those fuckers keep pillaging this rock. I've got some, uh... paperwork that I need to sort out. It'll take hours, and I'm not to be disturbed. You got that?
DIALOG | P_NAME    | Yes, you can trust me. I'm a good boy.
DIALOG | Jean-Marc | Clispaeth...
MOVETO | o_jeanmarc01 | o_cinema0 | MOVE_NORMAL
WAIT   | 0
QUEST  | jeanmarcState = 1
Destroy | o_jeanmarc01
LOOK   | o_cts_hoopz | SOUTH
WAIT   | 0.5
DIALOG | P_NAME    | That's one less Duergar to deal with... for now at least.

FILL_OUT_2
DIALOG | P_NAME    | I need to leave...
DIALOG | Jean-Marc | No shit, Sherlocke.
";
}

// Minecart Pit //
else if room = r_min_jeanmarcPit01 then
{
// Garbag //
scr_event_hook_onCommon(event_cinema);
flipAuto = 0;
faceAuto = 0;
image_xscale = 1;
siz = ds_map_size(__anims);
fir = ds_map_find_first(__anims);
for (i = 0; i &lt; siz; i += 1)
{
    scr_entity_animation_setSpriteIndex(fir, s_jeanmarcSleep01);
    fir = ds_map_find_next(__anims, fir);
}

timer_sleep = 10;

// Pit deactivation //
if scr_quest_get_state("jeanmarcState") != 1 then scr_event_interactive_deactivate();  

script = "
DIALOG | P_NAME | Hmm, it's that Duergar from before. He is sound asleep.
WAIT   | 0.5
LOOK   | o_cts_hoopz | WEST
WAIT   | 0.5
DIALOG | P_NAME | Hmm...
WAIT   | 0.5
FRAME  | CAMERA_NORMAL | o_cinema0
WAIT   | 0
WAIT   | 1.5
FRAME  | CAMERA_NORMAL | o_cts_hoopz | o_jeanmarc01
WAIT   | 0
WAIT   | 0.5
CHOICE | Push the cart into the pit?
REPLY  | PUSH_YES | You reap what you sow.
REPLY  | PUSH_NO  | No, I'm no executioner.
      
PUSH_YES       
DIALOG | P_NAME | See you on the flip side.
MOVETO | o_cts_hoopz | o_cinema1 | MOVE_NORMAL
WAIT   | 0
LOOK   | o_cts_hoopz | WEST
WAIT   | 0.4
USEAT  | WEST
EVENT  | o_jeanmarc01 | 1
CREATE | o_cts_jeanmarc_demise01 | " + string(o_jeanmarc01.x) + " | " + string(o_jeanmarc01.y) + "
FRAME  | CAMERA_NORMAL | o_cinema0
WAIT   | 0
WAIT   | 6.5
FRAME  | CAMERA_NORMAL | o_cts_hoopz | o_jeanmarc01
WAIT   | 0
DIALOG | P_NAME | ...
QUEST  | jeanmarcState = 3
QUEST  | duergarMurderAlpha = 1
Duergar | kill | jean-marc
Destroy | o_jeanmarc01

PUSH_NO
DIALOG | P_NAME | No, this isn't something for me to decide. I know they are evil, everything I've seen and heard and felt and smelled has proved that much. But... I'm no executioner.       
";
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>// Inheritance //
event_inherited();

// Pause //
if paused() exit;

// Sleep //
if room = r_min_jeanmarcPit01 and visible = true then
    {
    if timer_sleep &gt; 0 then
        {
        // Tick down //
        timer_sleep -= dt();
        
        // Sleep effect //
        if timer_sleep &lt;= 0 then
            {
            instance_create(x - 16, y - sprite_height + 6, o_effect_zzz);
            timer_sleep = 15;
            }
        }
    }

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="20">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Make patroller
obj = instance_create(o_cinema20.x, o_cinema20.y, o_jeanmarc_patrol);
with (obj)
{
// WayPoints //
target_number = 1;
target_x[0] = o_cinema20.x;
target_y[0] = o_cinema20.y;
target_x[1] = o_cinema21.x;
target_y[1] = o_cinema21.y;

// Pauses //
pause[0] = 1;
pause[1] = 1;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="11">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Visible = false
visible = false;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Jean-Marc attack
with (id) scr_event_interactive_deactivate();
Duergar("spawn", "jeanmarc", x, y);
with (id) instance_destroy();
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>16,32</point>
    <point>16,16</point>
  </PhysicsShapePoints>
</object>
