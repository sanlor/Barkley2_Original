<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>s_grieg01</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>InteractiveActor</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>// Inheritance //
event_inherited()

// Only exists post curfew //
if scr_area_get() = "tnn" then
    {
    if scr_time_db("tnnCurfew") == "before" or scr_time_db("tnnCurfew") == "during" then scr_event_interactive_deactivate();
    }
else if Quest("griegState") &gt;= 2 then scr_event_interactive_deactivate();
    
// Cinema //
scr_event_hook_onCommon(event_cinema);

// Event for Grieg, random dwarf waiting for the train, not knowing there isn't one.
// From my design document: "Just a random dwarf hanging around Tir na nog. He can't get his mind around the fact that he's imprisoned there."
// NOTE: See also the event_tnn_kojima01 script. Kojima sells fake train tickets which you can buy and sell to Grieg for a loss. You can only do this once.

script = "
IF area == tnn | GOTO | AREA_TNN
IF area == est | GOTO | AREA_EST

AREA_TNN
IF body == governor | GOTO | GOVERNOR
IF griegState == 0  | GOTO | STATE_0_TNN
IF griegState == 1  | GOTO | STATE_1_TNN

GOVERNOR
DIALOG | Grieg               | Excuse me, sir. When is the `kw`next train`rt` leaving Tir na Nog?
DIALOG | Governor Elagabalus | Yes, yes, yes. I am the Governor so I ride the trains often. Thank you for bringing this to my attention.

STATE_0_TNN
DIALOG | Grieg  | Excuse me.
DIALOG | Grieg  | When is the `kw`next train`rt` leaving Tir na Nog?
DIALOG | P_NAME | I don't know. Does this town have a train?
DIALOG | Grieg  | Yes, I'm sure of it. There must be a train. How else does anybody get back home?
QUEST  | griegState = 1
QUEST  | knowTNNTrain = 1

STATE_1_TNN
DIALOG | Grieg  | I can't wait to go home.

AREA_EST
IF @Train Ticket@ &gt;= 1 | IF griegTicket == 0 | GOTO | TICKET_HAVE
IF griegState == 0 | GOTO | STATE_0_EST
IF griegState == 1 | GOTO | STATE_1_EST
IF griegState == 2 | GOTO | STATE_2_EST
IF griegState == 3 | GOTO | STATE_3_EST

STATE_0_EST
DIALOG | Grieg  | Excuse me. When is the `kw`next train`rt` leaving The Social?
DIALOG | P_NAME | I don't know. Does this town have a train?
DIALOG | Grieg  | Yes, I'm sure of it. There must be a train. How else does anybody get back home?
QUEST  | griegState = 1

STATE_1_EST
DIALOG | Grieg | I can't wait to go home.

STATE_2_EST
DIALOG | Grieg | The headmaster always told me that it doesn't take much to make a dream. Now that I have a train ticket, `w1`I can dream again.`w0`

STATE_3_EST
DIALOG | Grieg | I can't wait to use this chup to enjoy trains more!

TICKET_HAVE
DIALOG   | Grieg  | Excuse me, do you know when the `kw`next train`rt` is leaving The Social?
DIALOG   | P_NAME | I don't know. Pretty soon, I think. I just bought a train ticket.
DIALOG   | Grieg  | You... you got a `w1`train ticket?!?!`w0`
DIALOG   | P_NAME | Yeah, take a look, this guy is over there selling them.
DIALOG   | Grieg  | Wow... you are so cool... to have your very own train ticket... I want to be a cool guy like you and have my own train ticket so I can ride the train.
CHOICE   | Give him my ticket?
REPLY    | TICKET_GIVE | You could have my ticket, I guess...
REPLY    | TICKET_KEEP | You snooze you lose.

TICKET_GIVE
DIALOG   | P_NAME | I can give you mine, I guess. It's just a train ticket. I guess I can buy another one.
DIALOG   | Grieg  | `s1`You'd do that for me????`s0`
DIALOG   | P_NAME | Sure. I can see how much it means to you.
DIALOG   | Grieg  | Wow, great!!! Wait, does that mean you won't be a cool guy without a train ticket anymore?? This is a `sq`big decision`rt` for you...
DIALOG   | P_NAME | No, it's really fine. It looks like you need it more than me.
BREAKOUT | add    | money
DIALOG   | Grieg  | You are the absolute best ever!!!_ Wait, I have to give you something for it, let me check my pockets... Oooh! Here!!!
QUEST    | temp = @money_griegTicket@
QUEST    | temp -= @griegSpent@
NOTIFY   | Got handful of boogers and @temp@ neuro-shekels!
QUEST    | money += @temp@
ITEM     | Train Ticket | -1
DIALOG   | Grieg  | This is the greatest. Now I can finally go home. `s1`Thank you so much!!`s0`
BREAKOUT | clear
QUEST    | griegState = 2
QUEST    | griegTicket = 1

TICKET_KEEP
DIALOG   | P_NAME | I got the last train ticket. Looks like you're stuck here forever now. Too bad, pal.
DIALOG   | Grieg  | My life... Is over...
";

</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>15,42</point>
    <point>24,24</point>
  </PhysicsShapePoints>
</object>
