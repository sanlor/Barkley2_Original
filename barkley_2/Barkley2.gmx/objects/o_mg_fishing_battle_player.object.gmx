<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>s_mg_fishing_battle_player</spriteName>
  <solid>0</solid>
  <visible>0</visible>
  <depth>-1000000000</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>// Setup //
strength = o_mg_fishing_control.lureCatch[o_mg_fishing_control.lureIndex];
vigor = o_mg_fishing_control.lureWeight[o_mg_fishing_control.lureIndex];
xPos = 0;
yPos = -1;
hitpoints = 100;
moveSpeed = 30 + strength * 10;
if strength &gt;= 0 and strength &lt;= 2 then size = 4;
if strength &gt;= 3 and strength &lt;= 5 then size = 2;
if strength &gt;= 6 and strength &lt;= 8 then size = 0;
image_speed = 0;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>// Pause //
if paused() exit;
if o_mg_fishing_control.escape = true then exit;

// Move about //
if MiniKeyHeld("up") then yPos -= moveSpeed * dt_sec();
if MiniKeyHeld("down") then yPos += moveSpeed * dt_sec();
if MiniKeyHeld("left") then xPos -= moveSpeed * dt_sec();
if MiniKeyHeld("right") then xPos += moveSpeed * dt_sec();

// Boundaries //
if size = 0 then bound = 27; //29
else if size = 2 then bound = 30; // 32
else if size = 4 then bound = 33; // 35
if xPos &lt; -bound then xPos = -bound;
if xPos &gt; +bound then xPos = +bound;
if yPos &lt; -bound then yPos = -bound;
if yPos &gt; +bound then yPos = +bound;
x = xPos;
y = yPos;   

// Take damage //
if !place_meeting(x, y, o_mg_fishing_battle_fish)
    {
    hitpoints -= (1 - strength / 50);   
    scr_entity_animation_set(o_cts_hoopz, "fishingLosing"); 
    if audio_is_playing_ext("sn_fishbattlelosing01") then audio_stop_sound_ext("sn_fishbattlelosing01")
    if !audio_is_playing_ext("sn_fishbattlelosing02") then audio_play_sound_at_xy("sn_fishbattlelosing02", false, 10, view_xview + 192, view_yview + 120);
    }

// Recover hitpoints //
else 
    {
    hitpoints += (0.01 + strength / 75);
    scr_entity_animation_set(o_cts_hoopz, "fishingPulling"); 
    if audio_is_playing_ext("sn_fishbattlelosing02") then audio_stop_sound_ext("sn_fishbattlelosing02")
    if !audio_is_playing_ext("sn_fishbattlelosing01") then audio_play_sound_at_xy("sn_fishbattlelosing01", false, 10, view_xview + 192, view_yview + 120);
    }

// HP Limit //
if hitpoints &gt; 100 then hitpoints = 100;

// Fish got away //
if hitpoints &lt;= 0 then
    {
    audio_play_sound_at_xy("fishing_defeat", false, 10, view_xview + 192, view_yview + 120);
    audio_stop_sound_ext("sn_fishbattlelosing01")
    audio_stop_sound_ext("sn_fishbattlelosing02")
    o_mg_fishing_control.timer_setup = 10;
    o_mg_fishing_control.music = 0;
    with o_mg_fishing_fish if hooked = true then instance_destroy();
    with o_mg_fishing_lure instance_destroy();
    with o_mg_fishing_battle_fish instance_destroy();
    instance_destroy();
    }

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Drawn from o_mg_fishing_control
if place_meeting(x, y, o_mg_fishing_battle_fish) then draw_sprite_ext(sprite_index, size, view_xview + 192 + xPos, view_yview + 120 + yPos, 1, 1, 0, c_white, 1);
else draw_sprite_ext(sprite_index, size + 1, view_xview + 192 + xPos, view_yview + 120 + yPos, 1, 1, 0, c_white, 1);
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
