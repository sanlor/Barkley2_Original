<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>s_min_dinnerbell01</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-99</depth>
  <persistent>0</persistent>
  <parentName>InteractiveActor</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Create
event_inherited();
scr_event_hook_onCommon(event_cinema);
scr_entity_animation_define("default", sprite_index, 0, 1, 0);
scr_entity_animation_define("ring", sprite_index, 0, 8, ANIMATION_DEFAULT_SPEED);
shadow_visible = 0;
duergar_mines_check = 1;

script = "
IF minesDinner == 1    | GOTO | DINNER_OVER
IF playerBlueFace == 0 | GOTO | DINNER_HELL
GOTO | DINNER_BELL

DINNER_OVER
DIALOG | P_NAME | Dinner's done...

DINNER_BELL
DIALOG | P_NAME | Hmm, a mysterious dinner bell... Maybe I could use it to distract the duergars.
CHOICE | Ring the bell?
REPLY  | YES | Yes.
REPLY  | NO  | No.

YES
MOVETO | o_cts_hoopz | o_cinema0 | MOVE_NORMAL
WAIT   | 0
LOOK   | o_cts_hoopz | EAST
FRAME  | CAMERA_FRAME | o_cinema6
WAIT   | 0
USEAT  | EAST
SOUND  | sn_dinner_bell01
PLAYSET | " + string(id) + " | ring | default
WAIT   | 0
WAIT   | 1
Duergar | alive | melqart
IF duergar != alive | GOTO | DINNER_SCAMMED
DIALOG | P_NAME | Dinner... Is served.
WAIT   | 0.5
FRAME  | CAMERA_NORMAL | o_cinema1
WAIT   | 1
Misc   | set | o_melqart01 | o_cinema2
WAIT   | 0.5
MOVETO | o_melqart01 | o_cinema1 | MOVE_FAST
WAIT   | 0
LOOK   | o_melqart01 | SOUTHEAST
WAIT   | 0.1
LOOK   | o_cts_hoopz | NORTHWEST
WAIT   | 0.2
DIALOG | Melqart | Finally! DINNER TIME!
IF melqartState == 0 | DIALOG | Melqart | You there, whoever the fuck you are. Me and the other Establishment Duergars will eat first. You go and gather up the dwarf scum to their quarters. Make sure they don't cause a ruckus. You can eat afterwards if there's anything left. Bwahahahahaha!
IF melqartState &gt;= 1 | DIALOG | Melqart | You there, the annoying greenhorn. Me and the other Establishment Duergars will eat first. You go and gather up the dwarf scum to their quarters. Make sure they don't cause a ruckus. You can eat afterwards if there's anything left. Bwahahahahaha!
DIALOG | P_NAME  | (Wow, what a jerk.)
QUEST  | minesDinner = 1
FADE   | 1 | 2
WAIT   | 2
LOOK   | o_cts_hoopz | WEST
Teleport | r_min_respawn01 | 280 | 280 | 2

DINNER_SCAMMED
DIALOG | P_NAME  | Hmmm... I guess that did nothing.

NO
DIALOG | P_NAME  | Dinner... Is not served.

DINNER_HELL
DIALOG | P_NAME  | Just a dinner bell.
";
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>// Inheritance //
event_inherited();

// Pause //
if paused() exit;

// Duergar check //
if duergar_mines_check &gt; 0 then
    {
    // Tick down //
    duergar_mines_check -= dt();
    
    // Event //
    if duergar_mines_check &lt;= 0 then
        {
        // Can't talk if melqart is alive AND you are not in blueface //
        if Duergar("alive", "melqart") = true then
            {
            // You have blueface, everything is good //
            if Quest("playerBlueFace") == 1 then 
                {
                _interactive = true;
                _disableOutline = false;        
                }
                
            // No blueface, you can't talk //
            else
                {
                _interactive = false;
                _disableOutline = true;
                }
            }
            
        // Melqart is dead, you can talk all you want, blueface or no //
        else 
            {
            _interactive = true;
            _disableOutline = false;
            }
        }
    }
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>16,32</point>
    <point>16,16</point>
  </PhysicsShapePoints>
</object>
