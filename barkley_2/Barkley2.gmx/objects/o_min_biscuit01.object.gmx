<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>s_proboscisBiscuit01</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>InteractiveActor</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited();

scr_event_hook_onInteract(event_cinema);
scr_entity_animation_new("bonfire");
scr_entity_animation_setRange("default", 0, 6);
scr_entity_animation_setRange("bonfire", 6, 1);
pickaxe = false;
duergar_mines_check = 1;
    
if room = r_min_respawn01 then 
    {
    scr_entity_animation_set(o_min_biscuit01, "bonfire");
    if Quest("minesDinner") != 1 then scr_event_interactive_deactivate();
    }
    
/*
    Check if Honus lives
    1. If player has no blueface go to normal interactions
    2. If player has blueface, and honus is alive, go to duergar guard dialog
    3. if player has blueface and honus is dead, go to normal interactions
*/
    
script = "
Duergar | alive | honus
IF playerBlueFace == 0 | GOTO | PLAYER_NORMAL
IF honusState == 0 | IF duergar == alive | GOTO | GUARDED_BY_A_DUERGAR
IF honusState &gt;= 1 | IF duergar == alive | GOTO | GUARDED_BY_A_DUERGAR
GOTO | PLAYER_NORMAL

GUARDED_BY_A_DUERGAR
LOOKAT | o_honus01 | o_cts_hoopz
DIALOG | Honus | Halt!
LOOKAT | o_cts_hoopz | o_honus01
FRAME  | CAMERA_NORMAL | o_cts_hoopz | o_honus01
WAIT   | 0
WAIT   | 0.5
DIALOG | Honus | Nosedwarfs scarce. No disturb. No molest. Need as slaves. 
DIALOG | P_NAME | Oh, okay.
FRAME  | CAMERA_NORMAL | o_cts_hoopz
WAIT   | 0

PLAYER_NORMAL
IF biscuitDialog == 0 | GOTO | BISCUIT_DIALOG_0
IF biscuitDialog == 1 | GOTO | BISCUIT_DIALOG_1
IF biscuitDialog == 2 | GOTO | BISCUIT_DIALOG_2

BISCUIT_DIALOG_0
DIALOG | Biscuit | Twentytwo boxes of `kw`coal`rt` last monday. 
DIALOG | Biscuit | Six boxes of `kw`Bitcoins`rt` and a small parcel of `kw`fresh beefaroni`rt` on last tuesday. 
DIALOG | Biscuit | Seventythree sacks of `kw`limestone`rt` and twenty boxes of... Oh, hello. I'm just memorizing all of our shipments by repeating them myself aloud.      
IF glovesBox &gt;= 2 | GOTO | GIFT

GIFT
DIALOG | Biscuit | Hey, here's something I found that isn't supposed to be here. You can have it. `w1`Here you go!`w0`
NOTIFY | Got @money_biscuitGift@ Neuro-Shekels!
QUEST  | money += @money_biscuitGift@
BREAKOUT | add | money
DIALOG | P_NAME  | Oh, uh, thanks.
DIALOG | Biscuit | Don't mention it! 
BREAKOUT | clear 
QUEST  | biscuitDialog = 1

BISCUIT_DIALOG_1
DIALOG | Biscuit | The Duergars here like to ask us how many items of what we shipped and when. I always know the answer, but they never do. Problem is that since they have no way to verify our answers they just beat us up everytime we get it wrong. According to them, we always get it wrong...
QUEST  | biscuitDialog = 2

BISCUIT_DIALOG_2
DIALOG | Biscuit | It's all just coal and limestone and rubies. Nothing juicy. Well... There is that `mq`Mysterious Artifact`rt` the Duergars are guarding down here, or so I've heard...        
";
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>// Inheritance //
event_inherited();

// Pause //
if paused() exit;

// Clang of the pickaxe //
if sprite_index = s_proboscisBiscuit01 and floor(_last_frame) = 3 and pickaxe = false and _active = true then
    {
    pickaxe = true;
    audio_play_sound_on_actor(id, "proboscis_pickaxe", false, 5);
    }
if _last_frame &lt;= 1 then pickaxe = false;

// Duergar check //
if duergar_mines_check &gt; 0 then
    {
    // Tick down //
    duergar_mines_check -= dt();
    
    // Event //
    if duergar_mines_check &lt;= 0 then
        {
        // Can't talk if either honus or jeanmarc is alive AND you are not in blueface //
        if Duergar("alive", "honus") = true or Duergar("alive", "jeanmarc") = true then
            {
            // You have blueface, everything is good //
            if Quest("playerBlueFace") == 1 then 
                {
                _interactive = true;
                _disableOutline = false;        
                }
                
            // No blueface, you can't talk //
            else
                {
                _interactive = false;
                _disableOutline = true;
                }
            }
            
        // Duergs are dead, you can talk all you want, blueface or no //
        else 
            {
            _interactive = true;
            _disableOutline = false;
            }
        }
    }
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>16,32</point>
    <point>16,16</point>
  </PhysicsShapePoints>
</object>
