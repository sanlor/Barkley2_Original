<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>s_proboscisPommen01</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>InteractiveActor</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited();

scr_event_hook_onInteract(event_cinema);
scr_entity_animation_new("bonfire");
scr_entity_animation_setRange("default", 0, 1);
scr_entity_animation_setRange("bonfire", 1, 1);
shadow_radius = 0; 
duergar_mines_check = 1;

// At Alpha Camp or at dinner scene/respawn //
if room = r_min_respawn01 then 
    {
    scr_entity_animation_set(o_min_pommen01, "bonfire");
    if Quest("minesDinner") == 0 then scr_event_interactive_deactivate();
    }
else if Quest("minesDinner") &gt;= 2 then scr_event_interactive_deactivate();

/*
    0. Check if Honus lives
    1. If dinner is over, Pommen is resting in the respawn cave
    2. If player has no blueface, go to normal interactions
    3. If player has blueface and honus is alive, go duergar guard dialog
    4. If honus is dead, go to normal interactions
*/

script = "
Duergar | alive | honus
IF minesDinner == 2 | GOTO | DEAD
IF playerBlueFace == 0 | GOTO | POMMEN
IF honusState == 0 | IF duergar == alive | GOTO | GUARDED_BY_A_DUERGAR
IF honusState &gt;= 1 | IF duergar == alive | GOTO | GUARDED_BY_A_DUERGAR
GOTO | POMMEN

POMMEN
IF pommenDialog == 0 | GOTO | POMMEN_DIALOG_0
IF pommenDialog == 1 | GOTO | POMMEN_DIALOG_1
IF pommenDialog == 2 | GOTO | POMMEN_DIALOG_2

DEAD
DIALOG | Pommen | `w1`... Urgh...`w0`

GUARDED_BY_A_DUERGAR
LOOKAT | o_honus01 | o_cts_hoopz
DIALOG | Honus | Halt!
LOOKAT | o_cts_hoopz | o_honus01
FRAME  | CAMERA_NORMAL | o_cts_hoopz | o_honus01
WAIT   | 0
WAIT   | 0.5
DIALOG | Honus | Nosedwarfs scarce. No disturb. No maim. No kill. Need as slaves. 
DIALOG | P_NAME  | Oh, okay.
FRAME  | CAMERA_NORMAL | o_cts_hoopz
WAIT   | 0

POMMEN_DIALOG_0
DIALOG | Pommen | `w1`Ugh... It hurts... so bad...`w0`
QUEST  | pommenDialog = 1

POMMEN_DIALOG_1
DIALOG | Pommen | `w1`... Oww... Usually just... two hits with the crowbar... per day... but today... seven...`w0`
QUEST  | pommenDialog = 2

POMMEN_DIALOG_2
DIALOG | Pommen | `w1`I think I've... broken ribs...`w0`
QUEST  | pommenDialog = 0        
";
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>// Inheritance //
event_inherited();

// Pause //
if paused() exit;

// Duergar check //
if duergar_mines_check &gt; 0 then
    {
    // Tick down //
    duergar_mines_check -= dt();
    
    // Event //
    if duergar_mines_check &lt;= 0 then
        {
        // Can't talk if either honus or jeanmarc is alive AND you are not in blueface //
        if Duergar("alive", "honus") = true or Duergar("alive", "jeanmarc") = true then
            {
            // You have blueface, everything is good //
            if Quest("playerBlueFace") == 1 then 
                {
                _interactive = true;
                _disableOutline = false;        
                }
                
            // No blueface, you can't talk //
            else
                {
                _interactive = false;
                _disableOutline = true;
                }
            }
            
        // Duergs are dead, you can talk all you want, blueface or no //
        else 
            {
            _interactive = true;
            _disableOutline = false;
            }
        }
    }
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>16,32</point>
    <point>16,16</point>
  </PhysicsShapePoints>
</object>
