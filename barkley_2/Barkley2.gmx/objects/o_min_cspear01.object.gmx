<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>s_gbl_treasureChest01</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>InteractiveActor</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited();
scr_event_hook_onCommon(event_cinema);
scr_entity_animation_new("opening");
scr_entity_animation_new("open");
scr_entity_animation_setSpeed("opening", 1);
scr_entity_animation_setRange("default", 0, 1);
scr_entity_animation_setRange("opening", 1, 5);
scr_entity_animation_setRange("open", 5, 1);
scr_entity_setMovementCollisionShape_rectangle(48, 14);
shadow_radius = 0;

if Quest("csMines") == 1 then scr_entity_animation_set(o_min_cspear01, "open");

script = "
MOVETO | o_cts_hoopz | o_cinema8 | MOVE_NORMAL
WAIT   | 0
LOOK   | o_cts_hoopz | NORTH
WAIT   | 0.1
IF lockpickMines == 0 | GOTO | FIRST_TIMER
IF lockpickMines == 1 | GOTO | SECOND_TIMER
IF lockpickMines == 2 | GOTO | OPEN_ALREADY

FIRST_TIMER
DIALOG | P_NAME | This treasure chest looks magnificent!
WAIT   | 0.25
USEAT  | NORTH
SOUND  | sn_lock1
WAIT   | 0.25
DIALOG | P_NAME | Dang, it's locked.
QUEST  | lockpickMines = 1
GOTO   | TRY_TO_OPEN

TRY_TO_OPEN
CHOICE | Try to open the treasure chest?
REPLY  | YES | Yeah!
REPLY  | NO  | NO!

YES
LOCKPICK | 2
IF lockpick == 1 | GOTO | OPEN_SUCCESS
IF lockpick == 0 | GOTO | OPEN_FAILURE

NO
DIALOG | P_NAME | Nay. Not right now.

OPEN_SUCCESS 
SOUND  | sn_lock4
DIALOG | P_NAME | I unlocked it!
DIALOG | P_NAME | Let's see what is in here...
FRAME  | CAMERA_NORMAL | o_cinema7
WAIT   | 0
USEAT  | NORTH
WAIT   | 0.25
PLAYSET | o_min_cspear01 | opening | open
SOUND  | sn_dooropen_wood
WAIT   | 1
SET    | o_cts_hoopz | firaga
CREATE | o_cts_cspear_got | 398 | 172
WAIT   | 6
NOTIFY | Got Cyber Handle!
ITEM   | Cyber Handle | 1
QUEST  | lockpickMines = 2
IF csMines == 0 | QUEST | csMines = 3
IF csMines == 1 | QUEST | csMines = 4
IF csMines == 2 | QUEST | csMines = 4
EVENT  | o_min_cspear01 | 0
IF csQuest == 7 | QUEST | csQuest = 8
IF csQuest == 6 | QUEST | csQuest = 7
IF csQuest == 5 | QUEST | csQuest = 6
IF csQuest &gt;= 6 | GOTO  | CSPEAR_COMMENT

CSPEAR_COMMENT
IF csQuest == 8 | DIALOG | P_NAME = s_port_hoopzSmirk | Another piece of the Cyberspear in the bag!_ That should be all of them. I'd better `kw`report to the Cyberdwarf`rt` as soon as possible.
IF csQuest == 7 | DIALOG | P_NAME = s_port_hoopzSmirk | Another piece of the Cyberspear in the bag! One more to go...
IF csQuest == 6 | DIALOG | P_NAME = s_port_hoopzSmirk | Another piece of the Cyberspear in the bag! Two more to go...

OPEN_FAILURE
DIALOG | P_NAME | I can't seem to open it...

SECOND_TIMER
GOTO   | TRY_TO_OPEN

OPEN_ALREADY
DIALOG | P_NAME | I already ransacked this loot.
";

/* 
csMines
    0 = Nothing has been done 
    1 = Quest started
    2 = Talked to Variable
    3 = Cspear obtained without starting the mission via Cdwarf
    4 = Cspear obtained with starting the mission via Cdwarf
*/
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>// Trigger the eagle eyes so he isn't on your way when you leave //
if instance_exists(o_mg_stealth_duergar_eagleeyes) then
    {
    with o_mg_stealth_duergar_eagleeyes
        {
        scr_path_delete();
        scr_path_set(x, y, o_cinema11.x, o_cinema11.y, move_speed, 0, 4000);
        target_x = o_cinema11.x;
        target_y = o_cinema11.y;
        }
    }
    
/*
        if (move_x + move_y) == 0 then
            {

</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>16,32</point>
    <point>16,16</point>
  </PhysicsShapePoints>
</object>
