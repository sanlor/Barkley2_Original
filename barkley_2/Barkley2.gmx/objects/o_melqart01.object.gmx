<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>s_melqart01</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>oDuergar</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Create
name = "melqart";
// If you are hoopz, auto-aggro
if (Quest("playerBlueFace") == 0) visible = 0;
// If you aggro'd as Hoopz and are blueface, don't allow aggro unless he exposed blueface
if (Quest("playerBlueFace") == 1 &amp;&amp; Quest("melqartState") != 4) solid = 1;
event_inherited();
if (guplur) exit;

scr_event_hook_onCommon(event_cinema);
script = "";
/*
    melqartState
        0 - Not spoken to
        1 - Spoken to once
        2 - Spoken to twice
        3 - Spoken to three times
        4 - Enraged against you
        5 - Forgery complete, Melqart has left the game
*/

if Note("have", "Forged Document") = true then Quest("tempNote", 1);
else Quest("tempNote", 0);

if scr_area_get() == "min" then
{
script = "
GOTO | WHAT_DO

WHAT_DO
CHOICE | Your command?
REPLY  | CHAT  | Talk
IF tempNote == 1 | REPLY  | ORDER | Show the Forged Document
REPLY  | LEAVE | Leave

CHAT
IF melqartState == 0 | GOTO | MELQART_0
IF melqartState == 1 | GOTO | MELQART_1
IF melqartState == 2 | GOTO | MELQART_2
IF melqartState == 3 | GOTO | MELQART_3

LEAVE
DIALOG | P_NAME  | Uh, I gots to go.
DIALOG | Melqart | Do you think I care? Fuck off.

MELQART_0
DIALOG | Melqart | That's far enough, fucker. No one goes past this point.
DIALOG | P_NAME  | What? Why not?
DIALOG | Melqart | Those are my orders. I never second guess orders.
DIALOG | P_NAME  | Only a fool follows orders blindly. You are throwing away your gamers honor.
DIALOG | Melqart | You looking for a knuckle sandwich?
DIALOG | P_NAME  | Hey, whoa! Take it easy. I'm just curious about what's in that chest over there.
DIALOG | Melqart | Be curious somewhere else. Fuck off.
QUEST  | melqartState = 1

MELQART_1
DIALOG | Melqart | Didn't get it the first time huh? THIS AREA IS OFFLIMITS. COMPRENDE?
DIALOG | P_NAME  | Okay, okay!
QUEST  | melqartState = 2

MELQART_2
DIALOG | Melqart | You got some sort of a problem? Or are you just looking for trouble? I've been standing here all day and I'm itching to pummel someone. A dwarf or a Duergar. It doesn't matter anymore. You looking to volunteer?
DIALOG | P_NAME  | No, I'm sorry. I didn't mean to cause trouble.
DIALOG | Melqart | What the fuck kinda Duergar talks like that? You sound like some weak piece of shit dwarf. This is your last warning. Back off or I'll shank you.
QUEST  | melqartState = 3

MELQART_3
DIALOG | Melqart | Okay, fuck this. You are going down! It's gametime!
EVENT  | o_melqart01 | 0
QUEST  | melqartState = 4
QUEST  | yordanoZone = 5

ORDER
DIALOG | Melqart | Now what? What the fuck do you want?
DIALOG | P_NAME  | Umm, I've got some new orders for you.
DIALOG | Melqart | Oh yeah? Let's see it.
GOTO   | NOTE_TRY

NOTE_TRY
NOTE   | select  | Melqart
IF note == exit  | GOTO | NOTE_EXIT
IF note == none  | GOTO | NOTE_EXIT
IF note == Forged Document | GOTO | FORGERY_SUCCESS
GOTO | FORGERY_FAIL

NOTE_EXIT
DIALOG | P_NAME  | Actually, nary ye mind.
DIALOG | Melqart | What? Oh fuck off, you swine!

FORGERY_SUCCESS
DIALOG | Melqart | Give me that note, you fucker. Hmm let's see now...
DIALOG | Melqart | ...
DIALOG | Melqart | ...
DIALOG | Melqart | ...
DIALOG | Melqart | Fucking finally. I'm finally off this piece of shit dump. Here, this post is yours, asshole. Just stand here and make sure no one touches the treasure chest. I'm sure they briefed you on this, heh, important mission. Bwahahahahaha!
DIALOG | P_NAME  | Yeah, sure.
DIALOG | Melqart | Now get the fuck out of my way!
MOVETO | o_cts_hoopz | o_cinema5  | MOVE_FAST
WAIT   | 0
MOVETO | o_melqart01 | o_cinema3 | MOVE_FAST
WAIT   | 0.5
LOOK   | o_cts_hoopz | EAST
WAIT   | 3.5
Destroy | o_melqart01
WAIT   | 0.5
DIALOG | P_NAME  | Wow, what a jerk. But even still: mission accomplished!
QUEST  | melqartState = 5
Note   | give | Forged Document

FORGERY_FAIL
IF melqartForgery == 0 | GOTO | FORGERY_1
IF melqartForgery == 1 | GOTO | FORGERY_2
IF melqartForgery == 2 | GOTO | FORGERY_3

FORGERY_1
DIALOG | Melqart | Give me that note, you fucker. Hmm let's see now... What the fuck is this? Is this supposed to be a joke or something?
DIALOG | P_NAME  | Oh, sorry, I must've given you the wrong note. Hold on let me try again.
QUEST  | melqartForgery = 1
GOTO   | NOTE_TRY

FORGERY_2
DIALOG | Melqart | This better be the right one, fucker. Now let's take a gander... Hmm... Oh what the FUCK?! What the fuck did you just give me?
DIALOG | P_NAME  | S-sorry! Here, let me try again!
QUEST  | melqartForgery = 2
GOTO   | NOTE_TRY

FORGERY_3
DIALOG | Melqart | I'm so pissed off right now. This better fucking be the one. Hmm... Well... Would you take a look at that... 
DIALOG | Melqart | THIS IS JUST A PIECE OF SHIT! YOU FUCKER! YOU GOOFED ON ME FOR THE LAST TIME! YOU'LL DIE FOR THIS!
EVENT  | o_melqart01 | 0
QUEST  | melqartState = 4
QUEST  | yordanoZone = 5
";
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="20">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Patroller
if scr_area_get() == "min" then obj = instance_create(o_cinema5.x, o_cinema5.y, o_melqart_patrol);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Melqart attacks
with o_melqart01 scr_event_interactive_deactivate();
Duergar("spawn", "melqart", o_melqart01.x, o_melqart01.y);
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>16,32</point>
    <point>16,16</point>
  </PhysicsShapePoints>
</object>
